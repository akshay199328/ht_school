!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){const{createElement:s,render:n,useState:a,useEffect:o,Fragment:r}=wp.element,{select:i,dispatch:l}=wp.data,u=e=>{const t=window.contact_users,[n,r]=a(!0),[l,u]=a({friends_active:!1,user_can_edit_post:!1,disable_instructor_display:!0}),[c,d]=a([]),[p,_]=a([]),[m,g]=a([]),[f,h]=a({subject:"",message:""});o(()=>{fetch(`${t.api}/check`,{method:"post",body:JSON.stringify({user_id:e.settings.user_id,token:i("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.status&&u(e.data),r(!1)})},[]);return s("div",{className:"contact_user"},n?s("div",null,s("div",{className:"widget_loader"},s("div",null),s("div",null),s("div",null),s("div",null))):s("div",{className:"dash-content-form"},s("h3",{class:"widget_title"},e.settings.title),s("select",{className:"usergroup-dropdown chosen","data-placeholder":t.translations.select_user_groups,onChange:s=>{let n=s.target.value;d([]),_([]),n&&fetch(`${t.api}/users`,{method:"post",body:JSON.stringify({type:n,user_id:e.settings.user_id,token:i("vibebp").getToken()})}).then(e=>e.json()).then(e=>{e.status&&d(e.data)})}},";",s("option",{value:""},t.translations.select_a_user_groups),l.friends_active?s("option",{value:"get_friends"},t.translations.friends):"",l.disable_instructor_display?"":s("option",{value:"get_instructors"},t.translations.instructor),s("option",{value:"get_admins"},t.translations.administrator),l.user_can_edit_post?s("option",{value:"get_course_students"},t.translations.course_students):""),m&&m.length?s("div",{className:"contact_users"},m.map((e,t)=>s("span",{onClick:()=>{(e=>{let t=m.findIndex(t=>t.id==e.id);if(t>-1){let e=[...m];e.splice(t,1),g(e)}})(e)}},s("span",null,e.name),s("span",null,"❌")))):"",s("input",{type:"text",name:"to",className:"input-text to usergroup-filter",placeholder:t.translations.type_name_to_autocomplete,onChange:e=>{let t=e.target.value;if(t&&t.length>2){let e=[...c].filter(e=>e.name.toLowerCase().split(t.toLowerCase()).length>1);_(e)}else _([])}}),s("input",{type:"text",name:"subject",className:"input-text subject",placeholder:t.translations.enter_subject,onChange:e=>h({...f,subject:e.target.value})}),s("textarea",{name:"message",className:"form_message",placeholder:t.translations.enter_message,onChange:e=>h({...f,message:e.target.value})}),m.length?s("a",{id:"dash_contact_form_submit",className:"button",onClick:s=>{let n=m.map(e=>e.id);fetch(`${t.api}/send_message`,{method:"post",body:JSON.stringify({member_ids:n,user_id:e.settings.user_id,subject:f.subject,message:f.message,token:i("vibebp").getToken()})}).then(e=>e.json()).then(e=>{if(e.message){let s=document.querySelector("#dash_contact_form_submit");s.textContent=e.message,setTimeout((function(){s.textContent=t.translations.send_message}),2e3)}})}},t.translations.send_message):"",p&&p.length?s("div",{className:"contact_users"},p.map((e,t)=>s("div",{className:"logo",onClick:()=>(e=>{-1==m.findIndex(t=>t.id==e.id)&&g([...m,e])})(e)},s("h3",{dangerouslySetInnerHTML:{__html:e.pic}}),s("span",null,e.name)))):""))};document.addEventListener("wplms_dash_contact_users",e=>{document.querySelector(".wplms_dash_contact_users")&&n(s(u,{settings:e.detail.widget.options}),document.querySelector(".wplms_dash_contact_users"))})}]);