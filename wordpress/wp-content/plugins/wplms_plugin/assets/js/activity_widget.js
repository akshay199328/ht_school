!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t){const{createElement:s,render:n,useState:a,useEffect:i,Fragment:r}=wp.element,{select:l,dispatch:o}=wp.data,d=e=>{const t=window.student_dash_activity,[n,o]=a(!0),[d,c]=a({}),[u,m]=a(()=>e.settings.messages?t.translations.unread_messages:e.settings.activity?t.translations.recent_activity:e.settings.friends?t.translations.friends_online:void 0),[g,v]=a(()=>{let s=[];return e.settings.messages&&s.push(t.translations.unread_messages),e.settings.activity&&s.push(t.translations.recent_activity),e.settings.friends&&s.push(t.translations.friends_online),s});i(()=>{f()},[]);const f=()=>{let s=[];return e.settings.messages&&s.push("messages"),e.settings.activity&&s.push("activity"),e.settings.friends&&s.push("friends"),fetch(`${t.api}/activity`,{method:"post",body:JSON.stringify({user_id:t.user_id,num:e.settings.number,token:l("vibebp").getToken(),type:s})}).then(e=>e.json()).then(e=>{if(e&&(console.log(e),Object.keys(e).length)){let t={};Object.keys(e).map((s,n)=>{console.log(s),e[s].status&&e[s].data&&e[s].data.length&&(t[s]=e[s].data)}),c(t)}o(!1)})};return s("div",{className:"activity_widget"},n?s("div",null,s("div",{className:"widget_loader"},s("div",null),s("div",null),s("div",null),s("div",null))):s(r,null,g&&g.length?s("div",{className:"tabs dash_tabs"},g.map((e,t)=>s("div",{className:e===u?"dash_tab active":"dash_tab",onClick:()=>{m(e)}},e))):"",s("div",{id:"",className:"tab_content"},e.settings.friends&&u==t.translations.friends_online?s("div",{id:"tab-friends",className:"tab-pane"},s("ul",{className:"dash-user-friends"},d.friends&&d.friends.length?d.friends.map((e,t)=>s("li",null,s("span",{dangerouslySetInnerHTML:{__html:e.avatar+" "+e.name}}),s("span",null,e.last_active))):s("div",{className:"message error"},t.translations.no_friends))):"",e.settings.messages&&u==t.translations.unread_messages?s("div",{id:"tab-messages",className:"tab-pane"},s("ul",{className:"dash-unread-messages"},d.messages&&d.messages.length?d.messages.map((e,t)=>s("li",null,s("span",{dangerouslySetInnerHTML:{__html:e.avatar}}),s("a",{href:e.link},e.subject,s("span",{dangerouslySetInnerHTML:{__html:e.subject_form}})))):s("div",{className:"message error"},t.translations.no_messages))):"",e.settings.activity&&u==t.translations.recent_activity?s("div",{id:"tab-activity",className:"tab-pane student_activity"},s("ul",{className:"dash-activities"},d.activity&&d.activity.length?d.activity.map((e,n)=>s("li",{class:e.component+" "+e.type},s("div",{class:"dash-activity"},s("span",{class:"dash-activity-time"},e.time+" "+t.translations.ago),s("strong",null,e.action)))):s("div",{className:"message error"},t.translations.no_activity))):"")))};document.addEventListener("wplms_dash_activity",e=>{e.target.removeEventListener(e.type,arguments.callee),document.querySelectorAll(".wplms_dash_activity").forEach(t=>{n(s(d,{settings:e.detail.widget.options}),t)})})}]);