!function(e){var t={};function n(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(s,r,function(t){return e[t]}.bind(null,r));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const{createElement:s,useState:r,useEffect:a,Fragment:i,render:o}=wp.element;var l=({progress:e,size:t})=>{let n,r;switch(t){case"xs":n=10,r=1;break;case"sm":n=25,r=2.5;break;case"med":n=50,r=5;break;case"lg":n=75,r=7.5;break;case"xl":n=100,r=10;break;default:n=50,r=5}const a=n-2*r,i=2*a*Math.PI,o=i-e/100*i;return s("div",{className:"react-progress-circle"},s("svg",{height:2*n,width:2*n},s("circle",{className:"ReactProgressCircle_circleBackground",strokeWidth:r,style:{strokeDashoffset:o},r:a,cx:n,cy:n}),s("circle",{className:"ReactProgressCircle_circle",strokeWidth:r,strokeDasharray:i+" "+i,style:{strokeDashoffset:o},r:a,cx:n,cy:n})))};const{Component:u,createElement:c,render:d,useState:m,useEffect:p,Fragment:_}=wp.element;var h=e=>{const[t,n]=m(e.duration),[s,r]=m({d:0,h:0,m:0,s:0});p(()=>{if(e.start){setTimeout(()=>{let s=t-1;s<=-1?e.update(e.quiz_id,"expired"):s>=0&&(n(s),a())},1e3)}else n(e.duration),a()},[t,e.start,e.duration]);const a=()=>{let e={...s},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};let i=0;return t>-1&&(i=Math.floor((e.duration-t)/e.duration*100),i<=0&&(i=1)),c("div",{className:"quiztimer"},c("div",{className:"circle_timer"},i?c(l,{size:window.innerWidth<480?"xs":"sm",progress:i}):"",c("span",null,c("span",{className:"timer_amount"},s.d?c(_,null,c("span",null,s.d),c("span",null,":")):"",s.h?c(_,null,c("span",null,s.h),c("span",null,":")):"",s.m?c(_,null,c("span",null,s.m),c("span",null,":")):"",c("span",null,s.s)),c("span",{className:"timer_unit"},s.d?c(_,null,c("span",null,window.wplms_course_data.translations.days),c("span",null)):"",s.h?c(_,null,c("span",null,window.wplms_course_data.translations.hours),c("span",null)):"",s.m?c(_,null,c("span",null,window.wplms_course_data.translations.minutes),c("span",null)):"",c("span",null,window.wplms_course_data.translations.seconds)))))};const{createElement:f,render:g,useState:w,useEffect:k,Fragment:q}=wp.element;var v=e=>{const[t,n]=w({});k(()=>{n(e.question)},[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),f(q,null,f("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),f("input",{type:"text",className:r,value:s,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}))};const{createElement:y,render:b,useState:x,useEffect:S,Fragment:z}=wp.element;var N=e=>{const[t,n]=x({}),[s,r]=x([]);S(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&a(t),r(t)}},[e.question.correct_indexes]);const a=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};let i="";return t.hasOwnProperty("marked_answer")&&(i=t.marked_answer),y(z,null,y("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?y(z,null,(t=>s.map((function(s,r){let a=t.options.findIndex(e=>e==s);return y("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(a)?"question_correct":"question_incorrect":"")},y("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:a,id:e.quiz_id+"_"+t.id+a,checked:parseInt(t.marked_answer)===a,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}),y("label",{for:e.quiz_id+"_"+t.id+a,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":y("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},y("i",{class:"vicon vicon-trash"}))):"")};const{createElement:O,render:E,useState:M,useEffect:C,Fragment:I}=wp.element;var P=e=>{const[t,n]=M({});C(()=>{n(e.question)},[e.question]);const s=(t,s)=>{let r={...e.question};r.marked_answer&&r.marked_answer.length||(r.marked_answer=[]),r.marked_answer[s]=t,n(r),e.update(r,e.index,"changed")},r=(t,n)=>O(I,null,O("span",{className:t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":""},O("select",{name:e.quiz_id+"_"+t.id,id:e.quiz_id+"_"+t.id,onChange:e=>{s(e.target.value,n)}},O("option",null,window.wplms_course_data.translations.select_option),((e,t)=>e.options.map((function(n,s){return e.hasOwnProperty("options_arr")&&e.options_arr&&e.options_arr.length&&e.options_arr[t]&&e.options_arr[t].length?e.options_arr[t].includes((s+1).toString())||e.options_arr[t].includes(s+1)?O("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}}):void 0:O("option",{value:s,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===s,dangerouslySetInnerHTML:{__html:n}})})))(t,n))),t.attempted?"":O("span",{className:"resetq_answer button",onClick:e=>{s(null,n)}},O("i",{class:"vicon vicon-trash"})));return O(I,null,t&&t.extra_content&&Array.isArray(t.extra_content)?O("div",{className:"question_content"},t.extra_content.map((function(e,n){return O(I,null,O("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),t.options&&t.options.length&&n<t.extra_content.length-1?O(I,null,r(t,n)):"")}))):"")};const{createElement:B,render:T,useState:A,useEffect:F,Fragment:D}=wp.element;var H=e=>{const[t,n]=A({}),[s,r]=A([]);"undefined"!=e.question.marked_answer&&null!=e.question.marked_answer||(e.question.marked_answer=[]),F(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&a(t),r(t)}},[e.question.correct_indexes]);const a=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[n],e[n]=s}};return B(D,null,B("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?B(D,null,(t=>{if(s&&s.length)return s.map((function(s,r){let a=t.options.findIndex(e=>e==s);return B("div",{className:"question_option checkbox "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(a)?"question_correct":"question_incorrect":"")},B("input",{type:"checkbox",name:e.quiz_id+"_"+t.id,value:a,id:e.quiz_id+"_"+t.id+a,checked:e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.includes(a),onChange:t=>{let s={...e.question};if(s.marked_answer.includes(a)){let e=s.marked_answer.indexOf(a);e>-1&&s.marked_answer.splice(e,1)}else s.marked_answer.push(a);n(s),e.update(s,e.index,"changed")}}),B("label",{for:e.quiz_id+"_"+t.id+a,dangerouslySetInnerHTML:{__html:s}}))}))})(t),t.attempted?"":B("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s),e.update(s,e.index,"changed")}},B("i",{class:"vicon vicon-trash"}))):"")};const{createElement:L,render:j,useState:R,useEffect:J,Fragment:Q}=wp.element;var X=e=>{const[t,n]=R("120"),[s,r]=R(()=>{let t="";return e.marked_answer&&e.marked_answer.length&&(t=e.marked_answer[e.index]),t});J(()=>{s.length>15&&n(8*s.length)},[s]);let a="";s&&(a=s);return L(Q,null,L("div",{className:"fillblank_area"},L("input",{type:"text",value:a,onChange:t=>{let n=s;n=t.target.value,r(n),e.update(n,e.index,"changed")},style:{width:t+"px"}})))};const{createElement:Y,render:W,useState:U,useEffect:K,Fragment:$}=wp.element;var V=e=>{const[t,n]=U({});K(()=>{n(e.question)},[]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);const r=(s,r,a)=>{if("changed"==a){let a={...t};a.marked_answer&&t.marked_answer.length||(a.marked_answer=[]),a.marked_answer[r]=s,n(a),e.update(a,e.index,"changed")}};return Y($,null,t&&t.extra_content&&Array.isArray(t.extra_content)?Y("div",{className:"question_content"},t.extra_content.map((function(e,n){return Y($,null,Y("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),n<t.extra_content.length-1?Y("div",{className:"fillblank_area "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":"")},Y(X,{update:r,index:n,marked_answer:t.marked_answer})):"")}))):"")};const{createElement:G,render:Z,useState:ee,useEffect:te,Fragment:ne}=wp.element;var se=e=>{const[t,n]=ee([]),[s,r]=ee(!1),[a,i]=ee([]),[o,l]=ee([]),[u,c]=ee([]),[d,m]=ee([]);te(()=>{i(e.items)},[e.items]);let p="droppable";s&&(p+=" active");const _=e=>{let t="";return s===a[e]&&(t="dragging"),t};return G("div",{className:p},a.map((p,h)=>G("div",{key:h,onDragStart:e=>{a[h]&&r(a[h])},onDragEnd:()=>{r(!1)},onDragOver:t=>{t.preventDefault(),((t,n)=>{if(!s)return;let r=a[n];if(s===r)return;let o=[...a];o=o.filter(e=>e!=s),o.splice(n,0,s),i(o),e.update(o,"changed")})(0,h)},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,h)},draggable:"true",style:d[h],onTouchStart:e=>{let n=[...u];t.map((e,t)=>{let s=e.getBoundingClientRect();n[t]=s}),c(n),a[h]&&r(a[h])},onTouchMove:e=>{e.preventDefault();let t=[];if("touchmove"===e.type){let n=[...d];n[h]={transform:"translateY("+Math.floor(e.touches[0].clientY-u[h].top)+"px)"},m(n),t.push(a[h]);let s=[];if(e.touches[0].clientY&&u.map((n,r)=>{n.top+n.height/2>e.touches[0].clientY&&a[r]!==a[h]&&t.push(a[r]),n.bottom-n.height/2<e.touches[0].clientY&&a[r]!==a[h]&&s.push(a[r])}),s.length)for(let e=s.length-1;e>=0;e--)t.unshift(s[e]);l(t)}},onTouchEnd:t=>{i(o),e.update(o,"changed"),c([]),m([]),r(!1),l([])},className:_(h)+" "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(h)?"question_correct":"question_incorrect":"")},G("div",{dangerouslySetInnerHTML:{__html:p}}))))};const{createElement:re,render:ae,useState:ie,useEffect:oe,Fragment:le}=wp.element;var ue=e=>{e.question.id,e.quiz_id;const[t,n]=ie({}),[s,r]=ie(!1);oe(()=>{let t=e.question;if(!s&&t&&t.marked_answer&&t.marked_answer.length&&"undefined"!=t.marked_answer){let e=[];t.marked_answer.map((n,s)=>{e.push(t.original_options[parseInt(n)-1])}),t.options=e,n(t),r(!0)}n(t)},[t]);return re(le,null,re("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?re(le,null,re(se,{items:t.options,original_items:t.original_options,update:(s,r)=>{if("changed"==r){let r=t;r.marked_answer=[],s.map((e,t)=>{let n=r.original_options.indexOf(e);r.marked_answer.push(n+1)}),n(r),e.update(r,e.index,"changed")}},question:t}),t.attempted?"":re("span",{className:"resetq_answer button",onClick:s=>{let r={...t};r.marked_answer=null,r.options=r.original_options,n(r),e.update(r,e.index,"changed")}},re("i",{class:"vicon vicon-trash"}))):"")};const{createElement:ce,render:de,useState:me,useEffect:pe,Fragment:_e}=wp.element;function he(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var fe=e=>{const[t,n]=me([]),[s,r]=me(!1),[a,i]=me([]),[o,l]=me(""),[u,c]=me([]),[d,m]=me(e.matches),[p,_]=me([]),[h,f]=me([]),[g,w]=me([]),[k,q]=me({}),[v,y]=me([]),[b,x]=me([]),[S,z]=me([]),[N,O]=me({x:0,y:0}),[E,M]=me([]);pe(()=>{let t=[...e.items];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(n=>{n&&"NaN"!=typeof n&&(t=t.filter(t=>t!=e.question.original_options[n-1]))}),c(t);let n=[];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(e=>{parseFloat(e)-1>=0?n.push(e-1):n.push(null)}),z(n),e.update(!1,"reset")},[e.items,e.reset]);let C="droppable";s&&(C+=" active");const I=e=>{let t="";return s===u[e]&&(t="dragging"),t};return ce("div",{className:"match_playground"},ce("div",{className:"match_options"},d&&d.length?d.map((n,l)=>ce("div",{key:l,className:"match_option "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(l)?"question_correct":"question_incorrect":""),onDrop:t=>{((t,n)=>{if(!s)return;if(E.index===n)return;let r=[...u],a=[...S];if(!a[n]&&0!==a[n]){r=r.filter(e=>e!=s);let t=e.original_items.indexOf(s);d&&d.length&&d.map((e,t)=>{he(a[t])&&(a[t]=null)}),he(n)||(a[n]=t),z(a),c(r),e.update(a,"changed")}})(0,l)},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,t)=>{if(e){let n=a;n[t]||(n[t]=e),i(n)}})(e,l)}},ce("div",{dangerouslySetInnerHTML:{__html:n}}),ce("div",{className:"children"},e.original_items&&null!=S[l]&&e.original_items[S[l]]?ce("div",{key:"droppablediv"+l,draggable:"true",onDragStart:t=>{e.original_items[S[l]]&&(r(e.original_items[S[l]]),M({index:l,source:"droppablediv"}))},onDragEnd:()=>{r(!1),M({})},onDragOver:e=>{e.preventDefault()},className:I(l),style:b[S[l]],onTouchStart:n=>{let s=[...h];t.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),f(s);let i=[...g];a.map((e,t)=>{let n=e.getBoundingClientRect();i[t]=n}),w(i),q(o.getBoundingClientRect()),e.original_items[S[l]]&&(r(e.original_items[S[l]]),M({index:l,source:"droppablediv"})),M({})},onTouchMove:e=>{if(e&&(e.preventDefault(),"touchmove"===e.type)){let t=[...b];t[S[l]]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},x(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{let n=[...u],a=[...S];k.top<N.y&&k.top+k.height>N.y&&k.left<N.x&&k.left+k.width>N.x&&(n.push(s),a.map((e,t)=>{e==S[l]&&(a[t]=null)})),w([]),q({}),r(!1),x([]),y([]),c(n),z(a),e.update(a,"changed"),O({x:0,y:0})}},ce("div",{dangerouslySetInnerHTML:{__html:e.original_items[S[l]]}})):""))):""),ce("div",{className:C,onDragOver:e=>{e.preventDefault()},onDrop:t=>{(t=>{if("droppablediv"!==E.source)return;if(!s)return;let n=[...u],r=[...S];n.includes(s)||n.push(s),c(n),he(E.index)||(r[E.index]=null),z(r),e.update(r,"changed")})()},ref:e=>{var t;(t=e)&&l(t)}},u&&u.length?u.map((s,i)=>ce("div",{key:"draggablediv"+i,onDragStart:e=>{u[i]&&r(u[i]),M({})},onDragEnd:()=>{r(!1),M({})},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,s)=>{if(e){let r=t;r[s]||(r[s]=e),n(r)}})(e,i)},draggable:"true",style:v[i],onTouchStart:e=>{let n=[...h];t.map((e,t)=>{let s=e.getBoundingClientRect();n[t]=s}),f(n);let i=[...g];a.map((e,t)=>{let n=e.getBoundingClientRect();i[t]=n}),w(i),s&&r(s),M({})},onTouchMove:e=>{if(e.preventDefault(),"touchmove"===e.type){let t=[...v];t[i]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},y(t),O({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{y([]);let n=[...u],a=[...S];g.map((t,r)=>{if(t.top<N.y&&t.top+t.height>N.y&&t.left<N.x&&t.left+t.width>N.x){let t=e.original_items.indexOf(s);t>=0&&!a[r]&&0!==a[r]&&(a[r]=t,n=n.filter(e=>e!=s))}}),w([]),r(!1),c(n),z(a),e.update(a,"changed"),O({x:0,y:0})},className:I(i)},ce("div",{dangerouslySetInnerHTML:{__html:s}}))):""))};const{createElement:ge,render:we,useState:ke,useEffect:qe,Fragment:ve}=wp.element;var ye=e=>{e.question.id,e.quiz_id;const[t,n]=ke({}),[s,r]=ke(!1);qe(()=>{n(e.question)},[t]);return ge(ve,null,ge("div",{className:"question_content"},ge("div",{className:"question_statement",dangerouslySetInnerHTML:{__html:t&&t.extra_content&&t.extra_content.statement?t.extra_content.statement:""}}),t.options&&t.options.length&&t.content.match&&t.content.match.length?ge(fe,{matches:t.extra_content.match,original_matches:t.extra_content.match,items:t.options,original_items:t.original_options,update:(s,a)=>{if("changed"==a){let r={...t};r.marked_answer=[],s.map(e=>{r.marked_answer.push(parseInt(e)+1)}),n(r),e.update(r,e.index,"changed")}"reset"==a&&r(!1)},reset:s,question:t}):"",ge("div",{className:"question_end",dangerouslySetInnerHTML:{__html:t&&t.content&&t.content.end?t.content.end:""}})),t.attempted?"":ge("span",{className:"resetq_answer button",onClick:s=>{r(!0);let a={...t};a.marked_answer=null,a.options=a.original_options,n(a),e.update(a,e.index,"changed")}},ge("i",{class:"vicon vicon-trash"})))};const{createElement:be,render:xe,useState:Se,useEffect:ze,Fragment:Ne}=wp.element;var Oe=e=>{const[t,n]=Se(e.question);let s="";return t.hasOwnProperty("marked_answer")&&(s=t.marked_answer),be(Ne,null,be("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?be(Ne,null,(t=>t.options.map((function(s,r){return be("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},be("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:parseInt(t.marked_answer)===r,onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")}}),be("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:s}}))})))(t),t.attempted?"":be("span",{className:"resetq_answer button",onClick:t=>{let s={...e.question};s.marked_answer=null,n(s)}},be("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Ee,render:Me,useState:Ce,useEffect:Ie,Fragment:Pe}=wp.element;var Be,Te,Ae=e=>{const[t,n]=Ce({});Ie(()=>{n(e.question)},[e.question]);let s="";t.hasOwnProperty("marked_answer")&&(s=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),Ee(Pe,null,Ee("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ee("textarea",{className:r,type:"text",onChange:t=>{let s={...e.question};s.marked_answer=t.target.value,n(s),e.update(s,e.index,"changed")},value:s},s))},Fe=Fe||function(e,t){var n={},s=n.lib={},r=function(){},a=s.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=s.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,s=this.sigBytes;if(e=e.sigBytes,this.clamp(),s%4)for(var r=0;r<e;r++)t[s+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(s+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[s+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],s=0;s<t;s+=4)n.push(4294967296*e.random()|0);return new i.init(n,t)}}),o=n.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++){var r=t[s>>>2]>>>24-s%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s+=2)n[s>>>3]|=parseInt(e.substr(s,2),16)<<24-s%8*4;return new i.init(n,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],s=0;s<e;s++)n.push(String.fromCharCode(t[s>>>2]>>>24-s%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],s=0;s<t;s++)n[s>>>2]|=(255&e.charCodeAt(s))<<24-s%4*8;return new i.init(n,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=s.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,s=n.words,r=n.sigBytes,a=this.blockSize,o=r/(4*a);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(s,l);l=s.splice(0,t),n.sigBytes-=r}return new i.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});s.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}});var m=n.algo={};return n}(Math);Te=(Be=Fe).lib.WordArray,Be.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,s=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,i=0;4>i&&r+.75*i<n;i++)e.push(s.charAt(a>>>6*(3-i)&63));if(t=s.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(s=n.charAt(64))&&-1!=(s=e.indexOf(s))&&(t=s);for(var s=[],r=0,a=0;a<t;a++)if(a%4){var i=n.indexOf(e.charAt(a-1))<<a%4*2,o=n.indexOf(e.charAt(a))>>>6-a%4*2;s[r>>>2]|=(i|o)<<24-r%4*8,r++}return Te.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,s,r,a,i){return((e=e+(t&n|~t&s)+r+i)<<a|e>>>32-a)+t}function n(e,t,n,s,r,a,i){return((e=e+(t&s|n&~s)+r+i)<<a|e>>>32-a)+t}function s(e,t,n,s,r,a,i){return((e=e+(t^n^s)+r+i)<<a|e>>>32-a)+t}function r(e,t,n,s,r,a,i){return((e=e+(n^(t|~s))+r+i)<<a|e>>>32-a)+t}for(var a=Fe,i=(l=a.lib).WordArray,o=l.Hasher,l=a.algo,u=[],c=0;64>c;c++)u[c]=4294967296*e.abs(e.sin(c+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var i=0;16>i;i++){var o=e[l=a+i];e[l]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}i=this._hash.words;var l=e[a+0],c=(o=e[a+1],e[a+2]),d=e[a+3],m=e[a+4],p=e[a+5],_=e[a+6],h=e[a+7],f=e[a+8],g=e[a+9],w=e[a+10],k=e[a+11],q=e[a+12],v=e[a+13],y=e[a+14],b=e[a+15],x=t(x=i[0],N=i[1],z=i[2],S=i[3],l,7,u[0]),S=t(S,x,N,z,o,12,u[1]),z=t(z,S,x,N,c,17,u[2]),N=t(N,z,S,x,d,22,u[3]);x=t(x,N,z,S,m,7,u[4]),S=t(S,x,N,z,p,12,u[5]),z=t(z,S,x,N,_,17,u[6]),N=t(N,z,S,x,h,22,u[7]),x=t(x,N,z,S,f,7,u[8]),S=t(S,x,N,z,g,12,u[9]),z=t(z,S,x,N,w,17,u[10]),N=t(N,z,S,x,k,22,u[11]),x=t(x,N,z,S,q,7,u[12]),S=t(S,x,N,z,v,12,u[13]),z=t(z,S,x,N,y,17,u[14]),x=n(x,N=t(N,z,S,x,b,22,u[15]),z,S,o,5,u[16]),S=n(S,x,N,z,_,9,u[17]),z=n(z,S,x,N,k,14,u[18]),N=n(N,z,S,x,l,20,u[19]),x=n(x,N,z,S,p,5,u[20]),S=n(S,x,N,z,w,9,u[21]),z=n(z,S,x,N,b,14,u[22]),N=n(N,z,S,x,m,20,u[23]),x=n(x,N,z,S,g,5,u[24]),S=n(S,x,N,z,y,9,u[25]),z=n(z,S,x,N,d,14,u[26]),N=n(N,z,S,x,f,20,u[27]),x=n(x,N,z,S,v,5,u[28]),S=n(S,x,N,z,c,9,u[29]),z=n(z,S,x,N,h,14,u[30]),x=s(x,N=n(N,z,S,x,q,20,u[31]),z,S,p,4,u[32]),S=s(S,x,N,z,f,11,u[33]),z=s(z,S,x,N,k,16,u[34]),N=s(N,z,S,x,y,23,u[35]),x=s(x,N,z,S,o,4,u[36]),S=s(S,x,N,z,m,11,u[37]),z=s(z,S,x,N,h,16,u[38]),N=s(N,z,S,x,w,23,u[39]),x=s(x,N,z,S,v,4,u[40]),S=s(S,x,N,z,l,11,u[41]),z=s(z,S,x,N,d,16,u[42]),N=s(N,z,S,x,_,23,u[43]),x=s(x,N,z,S,g,4,u[44]),S=s(S,x,N,z,q,11,u[45]),z=s(z,S,x,N,b,16,u[46]),x=r(x,N=s(N,z,S,x,c,23,u[47]),z,S,l,6,u[48]),S=r(S,x,N,z,h,10,u[49]),z=r(z,S,x,N,y,15,u[50]),N=r(N,z,S,x,p,21,u[51]),x=r(x,N,z,S,q,6,u[52]),S=r(S,x,N,z,d,10,u[53]),z=r(z,S,x,N,w,15,u[54]),N=r(N,z,S,x,o,21,u[55]),x=r(x,N,z,S,f,6,u[56]),S=r(S,x,N,z,b,10,u[57]),z=r(z,S,x,N,_,15,u[58]),N=r(N,z,S,x,v,21,u[59]),x=r(x,N,z,S,m,6,u[60]),S=r(S,x,N,z,k,10,u[61]),z=r(z,S,x,N,c,15,u[62]),N=r(N,z,S,x,g,21,u[63]);i[0]=i[0]+x|0,i[1]=i[1]+N|0,i[2]=i[2]+z|0,i[3]=i[3]+S|0},_doFinalize:function(){var t=this._data,n=t.words,s=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var a=e.floor(s/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,s=0;4>s;s++)r=n[s],n[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=o._createHelper(l),a.HmacMD5=o._createHmacHelper(l)}(Math),function(){var e,t=Fe,n=(e=t.lib).Base,s=e.WordArray,r=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),r=s.create(),a=r.words,i=o.keySize,o=o.iterations;a.length<i;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<o;u++)l=n.finalize(l),n.reset();r.concat(l)}return r.sigBytes=4*i,r}});t.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),Fe.lib.Cipher||function(e){var t=(p=Fe).lib,n=t.Base,s=t.WordArray,r=t.BufferedBlockAlgorithm,a=p.enc.Base64,i=p.algo.EvpKDF,o=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,s){return("string"==typeof n?_:m).encrypt(e,t,n,s)},decrypt:function(t,n,s){return("string"==typeof n?_:m).decrypt(e,t,n,s)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=p.mode={},u=function(e,t,n){var s=this._iv;s?this._iv=void 0:s=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=s[r]},c=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize;u.call(this,e,t,s),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+s)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,s=n.blockSize,r=e.slice(t,t+s);n.decryptBlock(e,t),u.call(this,e,t,s),this._prevBlock=r}}),l=l.CBC=c,c=(p.pad={}).Pkcs7={pad:function(e,t){for(var n,r=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,a=[],i=0;i<n;i+=4)a.push(r);n=s.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:l,padding:c}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=(l=(p.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:l}),encrypt:function(e,t,n,s){s=this.cfg.extend(s);var r=e.createEncryptor(n,s);return t=r.finalize(t),r=r.cfg,d.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:s.format})},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),e.createDecryptor(n,s).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),p=(p.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=s.random(8)),e=i.create({keySize:t+n}).compute(e,r),n=s.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},_=t.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:p}),encrypt:function(e,t,n,s){return n=(s=this.cfg.extend(s)).kdf.execute(n,e.keySize,e.ivSize),s.iv=n.iv,(e=m.encrypt.call(this,e,t,n.key,s)).mixIn(n),e},decrypt:function(e,t,n,s){return s=this.cfg.extend(s),t=this._parse(t,s.format),n=s.kdf.execute(n,e.keySize,e.ivSize,t.salt),s.iv=n.iv,m.decrypt.call(this,e,t,n.key,s)}})}(),function(){for(var e=Fe,t=e.lib.BlockCipher,n=e.algo,s=[],r=[],a=[],i=[],o=[],l=[],u=[],c=[],d=[],m=[],p=[],_=0;256>_;_++)p[_]=128>_?_<<1:_<<1^283;var h=0,f=0;for(_=0;256>_;_++){var g=(g=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&g^99;s[h]=g,r[g]=h;var w=p[h],k=p[w],q=p[k],v=257*p[g]^16843008*g;a[h]=v<<24|v>>>8,i[h]=v<<16|v>>>16,o[h]=v<<8|v>>>24,l[h]=v,v=16843009*q^65537*k^257*w^16843008*h,u[g]=v<<24|v>>>8,c[g]=v<<16|v>>>16,d[g]=v<<8|v>>>24,m[g]=v,h?(h=w^p[p[p[q^w]]],f^=p[p[f]]):h=f=1}var y=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],a=0;a<n;a++)if(a<t)r[a]=e[a];else{var i=r[a-1];a%t?6<t&&4==a%t&&(i=s[i>>>24]<<24|s[i>>>16&255]<<16|s[i>>>8&255]<<8|s[255&i]):(i=s[(i=i<<8|i>>>24)>>>24]<<24|s[i>>>16&255]<<16|s[i>>>8&255]<<8|s[255&i],i^=y[a/t|0]<<24),r[a]=r[a-t]^i}for(e=this._invKeySchedule=[],t=0;t<n;t++)a=n-t,i=t%4?r[a]:r[a-4],e[t]=4>t||4>=a?i:u[s[i>>>24]]^c[s[i>>>16&255]]^d[s[i>>>8&255]]^m[s[255&i]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,i,o,l,s)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,c,d,m,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,s,r,a,i,o){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],m=e[t+3]^n[3],p=4,_=1;_<l;_++){var h=s[u>>>24]^r[c>>>16&255]^a[d>>>8&255]^i[255&m]^n[p++],f=s[c>>>24]^r[d>>>16&255]^a[m>>>8&255]^i[255&u]^n[p++],g=s[d>>>24]^r[m>>>16&255]^a[u>>>8&255]^i[255&c]^n[p++];m=s[m>>>24]^r[u>>>16&255]^a[c>>>8&255]^i[255&d]^n[p++],u=h,c=f,d=g}h=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&m])^n[p++],f=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[m>>>8&255]<<8|o[255&u])^n[p++],g=(o[d>>>24]<<24|o[m>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^n[p++],m=(o[m>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^n[p++],e[t]=h,e[t+1]=f,e[t+2]=g,e[t+3]=m},keySize:8});e.AES=t._createHelper(n)}();var De=Fe,He={stringify:function(e){var t={ct:e.ciphertext.toString(De.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=De.lib.CipherParams.create({ciphertext:De.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=De.enc.Hex.parse(t.iv)),t.s&&(n.salt=De.enc.Hex.parse(t.s)),n}};var Le=e=>{let t="";if(!e.type)return t;if(!e.marked||"undefined"==e.marked)return t;switch(e.type){case"truefalse":case"single":case"survey":t=e.options[parseInt(e.marked)];break;case"multiple":if(t="",(n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"sort":case"match":if((n=e.marked.split(",")).length)for(let s=0;s<n.length;s++)"undefined"!==e.original_options[parseInt(n[s])-1]&&null!=e.original_options[parseInt(n[s])-1]&&""!=e.original_options[parseInt(n[s])-1]||(e.original_options[parseInt(n[s])-1]="____"),t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.marked.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":var n;if(t="",(n=e.marked.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"");break;case"largetext":case"smalltext":t=e.marked}return t};var je=e=>{let t="";if(!e.type)return"";switch(e.type){case"truefalse":t=e.correct?window.wplms_course_data.translations.true:window.wplms_course_data.translations.false;break;case"single":case"survey":t=e.options[parseInt(e.correct)-1];break;case"multiple":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"sort":case"match":if(t="",(n=e.correct.split(",")).length)for(let s=0;s<n.length;s++)t+=e.original_options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"select":if(t="",(n=e.correct.split("|")).length)for(let s=0;s<n.length;s++)t+=e.options[parseInt(n[s])-1]+(s+1<n.length?" , ":"");break;case"fillblank":case"text":case"largetext":case"smalltext":var n;if(t="",(n=e.correct.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"")}return t};function Re(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Je=(e,t=null,n=null,s=null,r=!0)=>{s&&(s=parseFloat(s)),n||(s=null);let a=0,i=[],o=0;e.user_marks=0;let l=0,u=null;Re(e.correct)||(u=JSON.parse(De.AES.decrypt(e.correct,e.key,{format:He}).toString(De.enc.Utf8))),e.correct=u,e.marked_answer&&"undefined"!=e.marked_answer||(e.marked_answer=null);let c=e.marked_answer;switch(e.type){case"truefalse":e.marked=c,e.correct=parseInt(u),c==u?(e.user_marks=e.marks,a=1):e.user_marks=0,i.push(u);break;case"single":e.marked=c,c==u-1?(e.user_marks=e.marks,a=1):e.user_marks=0,i.push(u-1);break;case"multiple":Re(c)&&(c=[]);var d=c;e.marked=c.join(",").slice();var m=u.split(",");if(i=m,t){if(d.length)for(let e=0;e<d.length;e++){let t=d[e]+1;t=t.toString(),-1!==m.indexOf(t)?o++:l++}a=o/m.length,e.user_marks=Math.round(e.marks*a*100)/100}else if(d.length==m.length)for(let t=0;t<d.length;t++){e.user_marks=e.marks,a=1;let n=d[t]+1;if(n=n.toString(),-1==m.indexOf(n)){e.user_marks=0,a=0;break}}break;case"match":case"sort":Re(c)&&(c=[]),e.marked=c.join(",").slice();let n=c,s=u.split(","),r=0;if(n&&n.length){for(let t=0;t<n.length;t++){e.user_marks=e.marks,a=1;let u="";Re(n[t])||(u=n[t].toString()),s[t]!=u?(a&&(e.user_marks=0,a=0,r=1),l++):(o++,i.push(t))}t?(a=o/s.length,e.user_marks=Math.round(e.marks*a*100)/100):r&&(e.user_marks=0,a=0)}break;case"fillblank":Re(c)&&(c=[]),c.map((e,t)=>{c[t]=e.toLowerCase()}),e.marked=c.join("|").slice(),u=u.toLowerCase();let p=u.split("|");if(e.user_marks=0,c.length){e.user_marks=e.marks,a=1;for(let t=0;t<c.length;t++){let n="";Re(c[t])||(n=c[t].toString());let s=[];Re(p[t])||Array.isArray(p[t])||(s=p[t].split(",")),-1==s.indexOf(n)?(a&&(e.user_marks=0,a=0),l++):(o++,i.push(t))}t?(a=o/p.length,e.user_marks=Math.round(e.marks*a*100)/100):c.length!==p.length&&(e.user_marks=0,a=0)}break;case"select":Re(c)&&(c=[]),e.marked=c.join("|").slice();let _=u.split("|");if(e.user_marks=0,c&&c.length){e.user_marks=e.marks,a=1;for(let t=0;t<c.length;t++){let n="";n=(parseInt(c[t])+1).toString(),n!=_[t]?(a&&(e.user_marks=0,a=0),l++):(o++,i.push(t))}t?(a=o/_.length,e.user_marks=Math.round(e.marks*a*100)/100):c.length!==_.length&&(e.user_marks=0,a=0)}break;case"smalltext":case"largetext":e.marked=c,c&&u&&c.toLowerCase()==u.toLowerCase()?(e.user_marks=e.marks,a=1):e.user_marks=0}if(!Re(c)&&s&&(t&&l>0?e.user_marks=e.user_marks-l*s:a||(e.user_marks=e.user_marks-s)),e.auto||r||(e.user_marks=0,e.show_correct_answer=0),i&&i.length)for(var p=i.length-1;p>=0;p--)"multiple"==e.type?i[p]=parseInt(i[p]-1):i[p]=parseInt(i[p]);return e.correct_indexes=i,e.auto&&(e.usercorrect=a,e.attempted=!0),e.marked=Le(e),e.correct=je(e),e};const{createElement:Qe,render:Xe,useState:Ye,useEffect:We,Fragment:Ue,RawHTML:Ke}=wp.element;var $e=e=>{const[t,n]=Ye({}),[s,r]=Ye(!1);We(()=>{n(e.question),setTimeout(()=>{r(!0)},200)},[]);let a="incorrect",i="checked_answer incorrect";return t.hasOwnProperty("user_marks")&&t.user_marks&&parseFloat(t.user_marks)>0&&(a="correct",i="checked_answer correct"),Qe(Ue,null,t.show_correct_answer?Qe("div",{className:i},Qe("strong",null,window.wplms_course_data.translations.correct_answer,Qe(Ke,null,t.correct))):"",Qe("div",{className:s?"question_wrapper loaded":"question_wrapper"},Qe("div",{className:"result"},Qe("div",{className:a},Qe("span",null),Qe("strong",null,t.user_marks)))))};const{createElement:Ve,render:Ge,useState:Ze,useEffect:et,Fragment:tt}=wp.element;const{createElement:nt,render:st,useState:rt,useEffect:at,Fragment:it}=wp.element;var ot=e=>{const[t,n]=rt({}),[s,r]=rt([]);at(()=>{n(e.quiz),r(e.currentQuestions)},[e.quiz,e.currentQuestions]);let a=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&(a=t.meta.questions),a.length)if(null!==e.filter)switch(e.filter){case"wrong":a=a.filter(e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0);break;case"correct":a=a.filter(e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0);break;case"bookmarked":a=a.filter(t=>e.bookMarked.indexOf(t.id)>-1)}else a=t.meta.questions;return nt("div",{className:"quiz_timeline"},nt("div",{class:t&&t.meta&&t.meta.questions&&t.meta.questions.length>=10?"timeline_wrapper question_numbers":"timeline_wrapper"},nt("ul",null,t&&t.meta&&t.meta.questions&&t.meta.questions.length?a.map((n,a)=>{let i="";return e.bookMarked.indexOf(n.id)>-1&&(i+=" bookmarked"),("undefined"!=n.marked_answer&&null!=n.marked_answer||Array.isArray(n.marked_answer)&&n.marked_answer.length)&&(i+=" done",n.hasOwnProperty("attempted")&&n.attempted&&(n.hasOwnProperty("user_marks")&&n.user_marks&&parseFloat(n.user_marks)>0?i+=" correct":i+=" incorrect")),-1!==s.indexOf(a)&&(i+=" active"),nt("li",{className:i,"data-number":window.wplms_course_data.translations.question_prefix+(a+1)},nt("span",{onClick:n=>{((n,a,i)=>{n.preventDefault();let o=[...s],l=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0){if(-1!==o.indexOf(i))return;let e=Math.ceil((i+1)/t.question_number),n=e*t.question_number-t.question_number,s=e*t.question_number;for(let e=n;e<s;e++)l.push(e);r(l)}e.update(l,"show")})(n,0,a)}},n.marks))}):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length?nt("span",{className:"hide_questions",onClick:e.hideQuestions},nt("span",{class:"vicon vicon-angle-double-left"}),nt("span",null,window.wplms_course_data.translations.hide_questions)):"")))};const{createElement:lt,render:ut,useState:ct,useEffect:dt,Fragment:mt}=wp.element;const{createElement:pt,render:_t,useState:ht,useEffect:ft,Fragment:gt}=wp.element;var wt=e=>{const[t,n]=ht({}),[s,r]=ht([]),[a,i]=ht(1);ft(()=>{if(n(e.quiz),r(e.currentQuestions),e.currentQuestions.length){let t=Math.ceil((e.currentQuestions[0]+1)/e.quiz.question_number);i(t)}const t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js",t.async=!0,t.onload=()=>{document.dispatchEvent(new Event("VibeBP_Editor_Content"))},document.body.appendChild(t)},[e.quiz,e.currentQuestions]),ft(()=>{n(e.quiz),o(null,1)},[e.filter]),ft(()=>{"bookmarked"==e.filter&&e.questions.length&&s.length&&e.questions.length<=s[s.length-1]&&o(null,e.questions.length)},[e.bookMarked]);const o=(n,s)=>{if(n&&n.preventDefault(),a===s)return;let o=[],l=s*t.question_number-t.question_number,u=s*t.question_number;for(let e=l;e<u;e++)o.push(e);r(o),e.update(o,"show"),i(s)},l=(n=null,i)=>{n&&n.preventDefault();let o=[...s],l=[];if(t.question_number&&"undefined"!=t.question_number&&t.question_number>0)if(i>0){let n;n=t.question_number+o[o.length]>e.questions.length?e.questions.length:o[o.length-1]+t.question_number+1;for(let e=o[o.length-1]+1;e<n;e++)l.push(e);let s=a;s++,r(l)}else{for(let e=o[0]-1;e>=o[0]-t.question_number;e--)l.unshift(e);let e=a;e--,r(l)}e.update(l,"show")};return t&&t.meta&&e.questions&&e.questions.length?pt("div",{class:"quiz_pagination_wrapper buttons has-addons"},e.questions[s[0]-1]&&"undefined"!=e.questions[s[0]-1]?pt("span",{href:"#",className:"button ques_link left prevq",onClick:e=>{l(e,-1)}},pt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})):pt("span",{href:"#",className:"button ques_link left prevq faded"},pt("i",{className:"vicon vicon-angle-left","aria-hidden":"true"})),(()=>{let n=Math.ceil(e.questions.length/t.question_number),s=n,r=[],i=0;if(n>1)for(;n;)if(n){let e=n;a==e?r.unshift(pt("span",{className:"button active",onClick:t=>{o(t,e)}},n)):(a-1>=1||a+1<=s)&&(a-1==e||a+1==e||1==e||e==s?r.unshift(pt("span",{className:"button",onClick:t=>{o(t,e)}},n)):i<2&&(r.unshift(pt("span",{className:"button"},"...")),i++)),n--}return r})(),e.questions[s[s.length-1]+1]&&"undefined"!=e.questions[s[s.length-1]+1]?pt("span",{href:"#",className:"button ques_link right nextq",onClick:e=>{l(e,1)}},pt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"})):pt("span",{href:"#",className:"button ques_link right nextq faded"},pt("i",{className:"vicon vicon-angle-right","aria-hidden":"true"}))):""};const{createElement:kt,render:qt,useState:vt,useEffect:yt,Fragment:bt,RawHTML:xt}=wp.element;var St=e=>kt(bt,null,e.active?kt("div",{className:"confirmpopup_wrapper"},kt("div",{className:"confirmpopup_content"},kt("div",{dangerouslySetInnerHTML:{__html:e.content}}),kt("div",{className:"buttons_wrapper"},kt("span",{className:"button",onClick:t=>{e.yesfunction,e.update(e.type,"trigger")}},e.yes),kt("span",{className:"button",onClick:t=>{e.update(e.type,"nottrigger")}},e.no)))):"");const{createElement:zt,render:Nt,useState:Ot,useEffect:Et,Fragment:Mt}=wp.element;function Ct(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var It=e=>{const[t,n]=Ot(e.quiz),[s,r]=Ot(!1),[a,i]=Ot(""),[o,l]=Ot({}),[u,c]=Ot({});return Et(()=>{let t=0,n=0,s=0,r=0;if(e.quiz&&e.quiz.meta&&e.quiz.meta.questions&&(e.quiz.meta.questions.map((e,a)=>{e.hasOwnProperty("usercorrect")&&e.hasOwnProperty("marked_answer")&&!Ct(e.marked_answer)?parseInt(e.usercorrect)>0?t++:n++:s++,r++}),c({correct:t,incorrect:n,ommitted:s}),""!=a)){let e={datasets:[{data:[t,n,s],backgroundColor:["#82c362","#dc6a6a","#5381ab"]}],labels:[window.wplms_course_data.translations.correct+" ("+t+") ("+Math.round(t/r*100)+"%)",window.wplms_course_data.translations.incorrect+" ("+n+") ("+Math.round(n/r*100)+"%)",window.wplms_course_data.translations.unattempted+" ("+s+") ("+Math.round(s/r*100)+"%)"]},i=new Chart(a,{type:"pie",data:e});l(i)}},[a]),zt("div",{className:"quiz_stats_chart"},t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?zt(Mt,null,o&&u?zt("div",{className:"quiz_stats_chart_pie"},zt("canvas",{ref:e=>{e&&""==a&&i(e)}})):"",zt("div",{className:"question_stats_content_wrapper"},zt("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.historical),zt("div",{className:"question_stats_content"},t.meta.questions.map((e,t)=>{if(e.hasOwnProperty("correct_data"))return zt("div",{className:e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0?"checked_answer correct":"checked_answer incorrect"},zt("span",null,window.wplms_course_data.translations.q,t+1),zt("span",null,e.correct_data,"%"))})),t.hasOwnProperty("tags_data")&&!Ct(t.tags_data)?zt(Mt,null,zt("span",{className:"question_stats_content_heading"},window.wplms_course_data.translations.correct_by_tag),zt("div",{className:"question_stats_content"},t.tags_data.map(e=>zt("div",{className:"checked_answer correct"},zt("span",{dangerouslySetInnerHTML:{__html:e.label}}),zt("span",null,e.value,"%"))))):"")):"")};const{createElement:Pt,render:Bt,useState:Tt,useEffect:At,Fragment:Ft}=wp.element,{dispatch:Dt,select:Ht}=wp.data;var Lt=e=>{const[t,n]=Tt([]),[s,r]=Tt(null),[a,i]=Tt(!0),[o,l]=Tt(null),[u,c]=Tt(!1);At(()=>{let e=Ht("vibebp").getToken();!function(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)?(d(e),r(e)):localforage.getItem("bp_login_token").then(t=>{e=t,d(e),r(e)})},[e.quizid]);const d=t=>{fetch(window.wplms_course_data.api_url+"/user/quiz/previousresults/"+e.quizid,{method:"post",body:JSON.stringify({token:t})}).then(e=>e.json()).then(e=>{e&&e.length&&n(e),i(!1)})};return a?"":Pt("div",{className:"previous_results_wrapper"},Pt("h3",{className:"subtitle",onClick:()=>{c(!u)}},Pt("span",null,window.wplms_course_data.translations.previous_results)," ",Pt("span",{className:u?"vicon vicon-minus":"vicon vicon-plus"})),u?o&&o.hasOwnProperty("id")?Pt("div",{className:"single_quiz_result quiz_results"},Pt("span",{className:"vicon vicon-arrow-left",onClick:()=>{l(null)}}),Pt(un,{quizid:e.quizid,activity:o.id})):Pt("div",null,t.length?Pt("ul",{className:"quiz_results"},t.map(e=>Pt("li",{className:"result",onClick:()=>{l(e)}},Pt("span",{dangerouslySetInnerHTML:{__html:e.content}})))):Pt("div",{className:"vbp_message message"},window.wplms_course_data.translations.results_not_available)):"")};const{createElement:jt,render:Rt}=wp.element;var Jt=e=>jt("div",{class:"lds-ellipsis"},jt("div",null),jt("div",null),jt("div",null),jt("div",null));const{createElement:Qt,useState:Xt,useEffect:Yt,Fragment:Wt,render:Ut,useRef:Kt}=wp.element,{dispatch:$t,select:Vt}=wp.data;const{createElement:Gt,render:Zt,useState:en,useEffect:tn,useCallback:nn,useRef:sn,Fragment:rn}=wp.element,{dispatch:an,select:on}=wp.data;function ln(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var un=e=>{const[t,n]=en({}),[s,r]=en("quiz"),[a,i]=en([]),o=sn(null),l=sn(null),[u,c]=en({}),[d,m]=en("up"),[p,_]=en(!1),[f,g]=en(!1),[w,k]=en(!1),[q,y]=en(!0),[b,x]=en(null),[S,z]=en(null),[O,E]=en([]),[M,C]=en([]);tn(()=>{let t=on("vibebp").getToken();ln(t)?localforage.getItem("bp_login_token").then(e=>{t=e,D(t),x(t)}):(D(t),x(t)),document.addEventListener("wplms_answer_question_type",({detail:e})=>{L(e.question,e.index,"changed")}),localforage.getItem("bookmarked_questions_"+e.quizid).then(e=>{e&&e.length&&E(JSON.parse(e))})},[e.quizid]);const I=(B=e=>{let t=window.scrollY,n=l.current.getBoundingClientRect();console.log("@"),void 0!==e.target.scrollTop?(t=e.target.scrollTop,o&&o.current<=t?m("up"):n.top<t&&m("down")):o&&o.current>t?m("up"):n.top<t&&m("down"),o.current=t},T=100,function(){var e=this,t=arguments,n=function(){F=null,A||B.apply(e,t)},s=A&&!F;clearTimeout(F),F=setTimeout(n,T),s&&B.apply(e,t)});var B,T,A,F;tn(()=>{if(!s){if(console.log("---"),document.querySelector(".course_status"))return document.querySelector(".course_status").addEventListener("scroll",I,!1),()=>{document.querySelector(".course_status").removeEventListener("scroll",I)};if(document.querySelector(".incourse"))return window.addEventListener("scroll",I,!1),()=>{window.removeEventListener("scroll",I)}}},[s]);const D=(t=null)=>{t||(t=b);let s={token:t};e.hasOwnProperty("activity")&&e.activity&&(s.activity=e.activity),fetch(window.wplms_course_data.api_url+"/user/quiz/"+e.quizid,{method:"post",body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{if(e){if(z(null),e.meta&&e.meta.questions){let t=0,s=0;if("object"==typeof e.meta.questions&&!Array.isArray(e.meta.questions)){let t=[];Object.keys(e.meta.questions).map(n=>{"object"==typeof e.meta.questions[n]&&(e.meta.questions[n].id=n,t.push(e.meta.questions[n]),t.id=n)}),e.meta.questions=t}e.meta.questions.map((n,r)=>{if(n.raw)e.meta.questions[r]=n.raw;else{e.meta.questions[r].show=!1;let t=localStorage.getItem(n.id);!ln(t)&&ln(n.marked_answer)&&(!function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(t)?n.marked_answer=t:n.marked_answer=JSON.parse(t)),n.attempted&&(e.meta.questions[r].correct=JSON.parse(De.AES.decrypt(n.correct,n.key,{format:He}).toString(De.enc.Utf8)),n.correct=je(n))}t+=parseFloat(n.marks),s+=parseInt(n.max_marks)}),Number.isInteger(t)||(t=t.toFixed(2)),e.marks=t,e.max_marks=s,e.question_number=parseInt(e.question_number);let r=[];if(e.question_number&&e.question_number>0)for(let t=0;t<e.question_number;t++)r.push(t);i(r),n(e)}e.remaining&&e.remaining<=0&&J(e,t);var s=document.createEvent("Event");s.initEvent("unit_traverse",!1,!0),document.querySelector(".unit_content")&&document.querySelector(".unit_content")&&document.querySelector(".unit_content").dispatchEvent(s)}else console.log(e);r(!1)})},L=(e,s,r)=>{if("changed"==r){let r={...t};r.meta.questions[s]=e,n(r),ln(e.marked_answer)?null==e.marked_answer&&localStorage.removeItem(e.id):"object"==typeof e.marked_answer||Array.isArray(e.marked_answer)?localStorage.setItem(e.id,JSON.stringify(e.marked_answer)):localStorage.setItem(e.id,e.marked_answer)}},j=(e,t)=>{"show"==t&&i(e)},R=()=>{r("start");let e={...t};e.start=!0,t.remaining&&t.remaining>0?(r(!1),n(e)):fetch(window.wplms_course_data.api_url+"/user/quiz/start",{method:"POST",body:JSON.stringify({quiz_id:e.id,token:b})}).then(e=>e.json()).then(t=>{r(!1),n(e)})},J=(s=null,a=null)=>{E([]),localforage.removeItem("bookmarked_questions_"+e.quizid),s||(s=t),a||ln(b)||(a=b),r("submit");let i={...s},o=0,l=0;if(i.meta&&i.meta.questions&&i.meta.questions.length)for(let e=0;e<i.meta.questions.length;e++)i.meta.questions[e].attempted||(i.meta.questions[e]=Je(i.meta.questions[e],t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!1)),i.meta.questions[e].content=i.meta.questions[e].original_content,i.meta.questions[e].auto||(i.meta.questions[e].user_marks=0),o+=parseFloat(i.meta.questions[e].user_marks),l+=parseInt(i.meta.questions[e].marks),localStorage.removeItem(i.meta.questions[e].id);i.marks=o.toFixed(2),i.max_marks=l,fetch(window.wplms_course_data.api_url+"/user/submitresult/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({quiz_id:i.id,course_id:i.course_id,results:i.meta.questions,quiz:i,token:a})}).then(e=>e.json()).then(t=>{if(t){if(r(!1),i.submitted=!0,i.start=!1,t.check_results_url&&(i.check_results_url=t.check_results_url),t.completion_message&&(i.meta.completion_message=t.completion_message),t.retake_html&&(i.retake_html=t.retake_html),i.meta&&i.meta.questions&&i.meta.questions.length&&!ln(t.correct_data))for(let e=0;e<i.meta.questions.length;e++)t.correct_data.hasOwnProperty(i.meta.questions[e].id)&&(i.meta.questions[e].correct_data=t.correct_data[i.meta.questions[e].id]);t.hasOwnProperty("tags_data")&&(i.tags_data=t.tags_data),n(i);var s=document.createEvent("Event");if(s.initEvent("unit_traverse",!1,!0),i.hasOwnProperty("quiz_passing_score")&&i.quiz_passing_score?t.hasOwnProperty("continue")&&t.continue&&e.hasOwnProperty("update")&&e.update("quizsubmitted"):e.hasOwnProperty("update")&&e.update("quizsubmitted"),document.querySelector(".unit_content")&&document.querySelector(".unit_content")){document.querySelector(".unit_content").dispatchEvent(s);var a=new CustomEvent("react_quiz_submitted",{detail:{next_unit:t.next_unit}});document.dispatchEvent(a)}}})},Q=(e,n)=>{switch(e.type){case"smalltext":return Gt(v,{question:e,index:n,update:L});case"single":return Gt(N,{question:e,index:n,update:L,quiz_id:t.id});case"select":return Gt(P,{question:e,index:n,update:L,quiz_id:t.id});case"multiple":return Gt(H,{question:e,index:n,update:L,quiz_id:t.id});case"fillblank":return Gt(V,{question:e,index:n,update:L,quiz_id:t.id});case"sort":return Gt(ue,{question:e,index:n,update:L,quiz_id:t.id});case"match":return Gt(ye,{question:e,index:n,update:L,quiz_id:t.id});case"truefalse":return Gt(Oe,{question:e,index:n,update:L,quiz_id:t.id});case"largetext":return Gt(Ae,{question:e,index:n,update:L,quiz_id:t.id});default:return document.dispatchEvent(new CustomEvent("wplms_load_question_type",{detail:{question:e,quiz_id:t.id,index:n}})),Gt("div",{"data-q":e.id,className:e.type})}},X=(e,n)=>{if("trigger"==n)switch(e){case"submit":J(t),g(!1),k(!1);break;case"start":R(),_(!1)}if("nottrigger"==n)switch(e){case"submit":g(!1),k(!1);break;case"start":_(!1)}};let Y=0;t.meta&&t.meta.duration&&(Y=t.meta.duration),t&&t.remaining&&t.remaining>0&&(Y=t.remaining);let W="",U="loading_quiz";s||(W="disabled",U+=" disabled");let K=window.wplms_course_data.translations.submit_quiz_confirm;if(t.meta&&t.meta.questions){let e=1;t.meta.questions.map((function(t){t.marked_answer||(e=0)})),e||(K=window.wplms_course_data.translations.unanswered_confirm+K)}let $=[];if(t.hasOwnProperty("meta")&&t.meta.hasOwnProperty("questions")&&t.meta.questions&&t.meta.questions.length&&($=t.meta.questions),$.length&&null!==S)switch(S){case"wrong":$=$.filter(e=>!e.hasOwnProperty("user_marks")||!e.user_marks||parseFloat(e.user_marks)<=0);break;case"correct":$=$.filter(e=>e.hasOwnProperty("user_marks")&&e.user_marks&&parseFloat(e.user_marks)>0);break;case"bookmarked":$=$.filter(e=>O.indexOf(e.id)>-1)}return"quiz"!==s?Gt(rn,null,Gt(St,{active:f,update:X,type:"submit",content:K,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),ReactDOM.createPortal(Gt(St,{active:w,update:X,type:"submit",content:window.wplms_course_data.translations.bookmark_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"submitQuiz"}),document.querySelector("#quiz_popup")),Gt(St,{active:p,update:X,type:"start",content:window.wplms_course_data.translations.start_quiz_confirm,yes:window.wplms_course_data.translations.yes,no:window.wplms_course_data.translations.no,yesfunction:"startQuiz"}),Gt("div",{className:"incourse"},Gt("div",{className:U},Gt("div",{id:"ajaxloader",className:W})),e.hasOwnProperty("activity")?t.submitted?Gt("h3",null,Gt("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?Gt("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):""):"":Gt("div",{className:"up"==d?"incoursequiz_details show_controls":"incoursequiz_details hide_controls",ref:l},Gt("div",null,t.submitted?Gt("strong",null,Gt("span",{className:"student_score"},t.meta.auto?t.marks+"/"+t.max_marks:""),t.quiz_passing_score?Gt("span",null,t.marks>t.quiz_passing_score?window.wplms_course_data.translations.passed:window.wplms_course_data.translations.failed):"",Gt("span",{className:"student_quiz_status"},window.wplms_course_data.translations.quiz_submitted)):Gt("div",{className:"quiztimer_wrapper"},t&&t.meta&&t.meta.duration&&parseInt(t.meta.duration)<863913600?Gt(h,{duration:Y,update:(e,n)=>{"expired"==n&&J(t)},quiz_id:t.id,start:t.start}):Gt("strong",null,window.wplms_course_data.translations.no_time_limit)),t&&t.meta&&t.meta.questions&&t.meta.questions.length&&!q?Gt("span",{className:"show_questions",onClick:()=>y(!0)},Gt("span",null,window.wplms_course_data.translations.show_questions),Gt("span",{className:"vicon vicon-angle-double-right"})):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&t.submitted?Gt("div",{className:"buttons has-addons small"},Gt("a",{className:"correct"==S?"button tip is-focused":"button tip",title:window.wplms_course_data.translations.show_correct_attempts,onClick:()=>{z("correct"!=S?"correct":null)}},Gt("span",{className:"vicon vicon-check"})),Gt("a",{className:"wrong"==S?"button tip is-focused":"button tip",title:window.wplms_course_data.translations.show_wrong_attempts,onClick:()=>{z("wrong"!=S?"wrong":null)}},Gt("span",{className:"vicon vicon-close"}))):"",t&&t.meta&&t.meta.questions&&t.meta.questions.length&&O.length?Gt("div",{className:"buttons has-addons"},Gt("a",{className:"bookmarked"==S?"button tip is-focused":"button tip",title:window.wplms_course_data.translations.show_bookmarked,onClick:()=>{z("bookmarked"!=S?"bookmarked":null)}},Gt("span",{className:"vicon vicon-bookmark-alt"}))):"",!t.submitted||t.meta&&t.meta.retakes>0?Gt("div",{className:"incourse_quiz_button"},t.start||t.submitted?"":t.remaining&&t.remaining>0?Gt("a",{className:"continue_quiz button is-primary",onClick:R},window.wplms_course_data.translations.continue):t.meta.hasOwnProperty("check_access")&&t.meta.check_access.hasOwnProperty("status")&&!t.meta.check_access.status?Gt("div",{className:"check_quiz",dangerouslySetInnerHTML:{__html:t.meta.check_access.html}}):Gt("a",{className:"start"===s?"start_quiz button full is-primary is-loading":"start_quiz  full button is-primary",onClick:()=>{window.wplms_course_data.start_popup?_(!0):R()}},window.wplms_course_data.translations.start),t.start&&!t.submitted?Gt("a",{className:"save"===s?"save_quiz button is-primary is-loading":"save_quiz button is-primary",onClick:()=>{if(t.meta.questions&&t.meta.questions.length){r("save");let e=[];t.meta.questions.map((t,n)=>{let s={...t};null==s.marked_answer||"undefined"==s.marked_answer||ln(s.marked_answer)||t.attempted||(s.correct=je(s),e.push(s))}),fetch(window.wplms_course_data.api_url+"/user/savequiz",{method:"POST",body:JSON.stringify({quiz_id:t.id,questions:e,token:b})}).then(e=>e.json()).then(e=>{r(!1)})}}},window.wplms_course_data.translations.save_quiz):"",t.start&&!t.submitted?Gt("a",{className:"submit"===s?"submit_quiz button is-primary is-loading":"submit_quiz button is-primary",onClick:()=>{window.wplms_course_data.submit_popup?g(!0):O.length?k(!0):J()}},window.wplms_course_data.translations.submit):"",!t.start&&t.submitted&&t.meta&&t.meta.retakes>0?Gt("div",{className:"quiz_retake",onClick:()=>(r("retake"),void fetch(window.wplms_course_data.api_url+"/user/coursestatus/retake_single_quiz/"+e.quizid,{method:"post",body:JSON.stringify({token:b})}).then(e=>e.json()).then(t=>{t&&(t.status?(D(),e.hasOwnProperty("update")&&e.update("retake_quiz")):t.message&&(an("vibebp").addNotification({icon:"",text:t.message}),r(!1)))}))},Gt("a",{className:"retake"===s?"retake_quiz button is-primary is-loading":"retake_quiz button is-primary"},window.wplms_course_data.translations.retake),Gt("strong",null,window.wplms_course_data.translations.retakes_left," : ",t.meta.retakes)):""):""),q?Gt(ot,{hideQuestions:()=>y(!1),quiz:t,currentQuestions:a,update:j,filter:S,bookMarked:O}):""),Gt("div",{className:"quiz_questions_content"},Gt("div",{className:""},t.start||t.submitted?"":Gt("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),!t.start&&t.submitted?Gt("div",{className:""},Gt("div",{className:"quiz_content",dangerouslySetInnerHTML:{__html:t.meta.completion_message}}),!t.start&&t.submitted&&t.retake_html?Gt("div",{dangerouslySetInnerHTML:{__html:t.retake_html}}):""):"",t.start||!t.submitted||e.hasOwnProperty("activity")?"":Gt(Lt,{quizid:e.quizid}),t&&t.meta&&t.meta.questions&&t.submitted&&t.meta.auto&&t.show_advance_stats&&!e.hasOwnProperty("activity")?Gt(It,{quiz:t}):"",t&&t.meta&&$&&(t.start||t.submitted)?$.map((i,o)=>{if(-1===a.indexOf(o))return;let l="",u="";return i.hasOwnProperty("show_hint")&&i.show_hint?(u="question_hint_content message show",l="question_hint show"):(u="question_hint_content message",l="question_hint"),Gt("div",{className:"question"},Gt("div",{className:"question_actions"},Gt("span",null,window.wplms_course_data.translations.question_full_prefix," ",o+1),Gt("div",null,Gt("span",{className:"marks"},Gt("i",{className:"vicon vicon-medall"}),i.marks),Gt("span",{className:M.indexOf(i.id)>-1?"is-loading":i.flagged?"flagged":"flag",onClick:()=>{((e,s)=>{let r=[...M];r.indexOf(e.id)<=-1&&r.push(e.id),C(r),fetch(window.wplms_course_data.api_url+"/user/question/flag/"+e.id,{method:"post",body:JSON.stringify({token:b,flagged:e.hasOwnProperty("flagged")&&e.flagged})}).then(e=>e.json()).then(a=>{if(a)if(a.status){let a=r.indexOf(e.id);a>-1&&(r.splice(a,1),C(r));let i={...t};i.meta.questions[s].flagged=!(e.hasOwnProperty("flagged")&&e.flagged),n(i)}else a.message&&an("vibebp").addNotification({icon:"",text:a.message})})})(i,o)}},Gt("i",{className:i.flagged?"vicon vicon-flag-alt":"vicon vicon-flag"})),i.hint?Gt("span",{className:l,onClick:e=>{let s={...t};s.meta.questions[o].hasOwnProperty("show_hint")&&s.meta.questions[o].show_hint?s.meta.questions[o].show_hint=!1:s.meta.questions[o].show_hint=!0,n(s)}}):"")),Q(i,o),!t.submitted&&t.start?Gt("span",{className:"bookmark button",onClick:()=>{(t=>{let n=[...O],s=n.indexOf(t.id);s<=-1?n.push(t.id):n.splice(s,1),localforage.setItem("bookmarked_questions_"+e.quizid,JSON.stringify(n)),E(n),n.length||"bookmarked"!=S||z(null)})(i)}},Gt("i",{className:O.indexOf(i.id)>-1?"vicon vicon-bookmark-alt":"vicon vicon-bookmark"})):"",i.attempted||!t.check_answer||t.submitted?"":Gt("div",{className:"checkanswer"===s?"check_answer button is-primary is-loading":"check_answer button is-primary",onClick:e=>{((e,s)=>{r("checkanswer");let a=Je(e,t.partial_marking,t.negative_marking,parseFloat(t.negative_marks),!0),i={...t};a.attempted=!0,i.meta.questions[s]=a,fetch(window.wplms_course_data.api_url+"/user/saveuserquestion",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({quiz_id:i.id,question:a,token:b})}).then(e=>e.json()).then(e=>{r(!1),n(i)})})(i,o)}},window.wplms_course_data.translations.check_answer),i.hint?Gt("span",{className:u,dangerouslySetInnerHTML:{__html:i.hint}}):"",i.attempted?Gt($e,{question:i}):"",i.attempted&&i.show_correct_answer&&i.explanation.length?Gt("div",{className:"explanation"},Gt("strong",null,window.wplms_course_data.translations.question_explanation),Gt("div",{dangerouslySetInnerHTML:{__html:i.explanation}})):"")}):"",t&&t.meta&&t.meta.questions&&(t.start||t.submitted)?Gt(wt,{quiz:t,questions:[...$],currentQuestions:a,filter:S,update:j,bookMarked:O}):"")))):Gt(Jt,null)};const{createElement:cn,render:dn,useState:mn,useEffect:pn,Fragment:_n}=wp.element,{dispatch:hn,select:fn}=wp.data,gn=e=>{const[t,n]=mn({}),[s,r]=mn(!1);return pn(()=>{fetch(`${window.wplms_course_data.api_url}/post/excerpt/${e.quizid}`,{method:"post",body:JSON.stringify()}).then(e=>e.json()).then(e=>{e.status&&e.hasOwnProperty("data")&&(n(e.data),r(!0))})},[e.quizid]),s?cn(_n,null,cn("div",{className:"quiz_content"},cn("div",{dangerouslySetInnerHTML:{__html:t}}))):""};document.addEventListener("userLoaded",e=>{if(document.querySelector("#wplms_quiz"))if(document.querySelector("#wplms_quiz").getAttribute("quiz_type")&&document.querySelector("#wplms_quiz").getAttribute("quiz_type").length){var t={type:document.querySelector("#wplms_quiz").getAttribute("quiz_type"),id:document.querySelector("#wplms_quiz").getAttribute("data-id"),content_id:document.querySelector("#wplms_quiz").getAttribute("content_id")},n=new CustomEvent("custom_quiz_type",{detail:t});document.dispatchEvent(n)}else dn(cn(un,{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))}),document.querySelector("#wplms_quiz")&&dn(cn(gn,{quizid:document.querySelector("#wplms_quiz").getAttribute("data-id"),type:document.querySelector("#wplms_quiz").getAttribute("data-type")}),document.querySelector("#wplms_quiz"))}]);