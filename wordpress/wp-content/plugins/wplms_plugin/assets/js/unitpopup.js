!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){e.exports=function(){"use strict";(function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),a=window.setTimeout((function(){t(i+r)}),r);return e=i+r,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})(),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(e){try{return new CustomEvent("test"),!1}catch(e){}function t(t,n){n=n||{bubbles:!1,cancelable:!1};var i=document.createEvent("MouseEvent");return i.initMouseEvent(t,n.bubbles,n.cancelable,e,0,0,0,0,0,!1,!1,!1,!1,0,null),i}t.prototype=Event.prototype,e.MouseEvent=t}(window);var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function t(n,i,r,a){e(this,t);var s=this;function o(e){e.stopPropagation(),document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",l),s.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{handle:s}}))}function l(e){e.stopPropagation(),s.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:e.clientX,mouseY:e.clientY}}))}this.position=n,this.constraints=i,this.cursor=r,this.eventBus=a,this.el=document.createElement("div"),this.el.className="croppr-handle",this.el.style.cursor=r,this.el.addEventListener("mousedown",(function(e){e.stopPropagation(),document.addEventListener("mouseup",o),document.addEventListener("mousemove",l),s.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:s}}))}))},s=function(){function n(t,i,r,a){e(this,n),this.x1=t,this.y1=i,this.x2=r,this.y2=a}return t(n,[{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return this.x1=null==e?this.x1:e,this.y1=null==t?this.y1:t,this.x2=null==n?this.x2:n,this.y2=null==i?this.y2:i,this}},{key:"width",value:function(){return Math.abs(this.x2-this.x1)}},{key:"height",value:function(){return Math.abs(this.y2-this.y1)}},{key:"resize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.x1+this.width()*n[0],r=this.y1+this.height()*n[1];return this.x1=i-e*n[0],this.y1=r-t*n[1],this.x2=this.x1+e,this.y2=this.y1+t,this}},{key:"scale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=this.width()*e,i=this.height()*e;return this.resize(n,i,t),this}},{key:"move",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.width(),i=this.height();return e=null===e?this.x1:e,t=null===t?this.y1:t,this.x1=e,this.y1=t,this.x2=e+n,this.y2=t+i,this}},{key:"getRelativePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=this.width()*e[0],n=this.height()*e[1];return[t,n]}},{key:"getAbsolutePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],t=this.x1+this.width()*e[0],n=this.y1+this.height()*e[1];return[t,n]}},{key:"constrainToRatio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"height";if(null!==e){switch(this.width(),this.height(),n){case"height":this.resize(this.width(),this.width()*e,t);break;case"width":this.resize(1*this.height()/e,this.height(),t);break;default:this.resize(this.width(),this.width()*e,t)}return this}}},{key:"constrainToBoundary",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],i=this.getAbsolutePoint(n),a=r(i,2),s=a[0],o=a[1],l=s,u=o,c=e-s,d=t-o,p=-2*n[0]+1,m=-2*n[1]+1,h=null,_=null;switch(p){case-1:h=l;break;case 0:h=2*Math.min(l,c);break;case 1:h=c}switch(m){case-1:_=u;break;case 0:_=2*Math.min(u,d);break;case 1:_=d}if(this.width()>h){var f=h/this.width();this.scale(f,n)}if(this.height()>_){var v=_/this.height();this.scale(v,n)}return this}},{key:"constrainToSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(a&&(a>1?(e=1*t/a,i*=a):a<1&&(t=e*a,n=1*i/a)),e&&this.width()>e){var s=e,o=null===a?this.height():t;this.resize(s,o,r)}if(t&&this.height()>t){var l=null===a?this.width():e,u=t;this.resize(l,u,r)}if(n&&this.width()<n){var c=n,d=null===a?this.height():i;this.resize(c,d,r)}if(i&&this.height()<i){var p=null===a?this.width():n,m=i;this.resize(p,m,r)}return this}}]),n}();function o(e){e.preventDefault();var t=e.changedTouches[0];t.target.dispatchEvent(new MouseEvent({touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup"}[e.type],{bubbles:!0,cancelable:!0,view:window,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY}))}var l=[{position:[0,0],constraints:[1,0,0,1],cursor:"nw-resize"},{position:[.5,0],constraints:[1,0,0,0],cursor:"n-resize"},{position:[1,0],constraints:[1,1,0,0],cursor:"ne-resize"},{position:[1,.5],constraints:[0,1,0,0],cursor:"e-resize"},{position:[1,1],constraints:[0,1,1,0],cursor:"se-resize"},{position:[.5,1],constraints:[0,0,1,0],cursor:"s-resize"},{position:[0,1],constraints:[0,0,1,1],cursor:"sw-resize"},{position:[0,.5],constraints:[0,0,0,1],cursor:"w-resize"}];function u(e,t){return Number(Math.round(e+"e"+t)+"e-"+t)}return function(r){function a(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,r),t(a,[{key:"getValue",value:function(e){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"getValue",this).call(this,e)}},{key:"setImage",value:function(e){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"setImage",this).call(this,e)}},{key:"destroy",value:function(){return n(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this)}},{key:"moveTo",value:function(e,t){return this.box.move(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"resizeTo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5];return this.box.resize(e,t,n),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"scaleBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[.5,.5];return this.box.scale(e,t),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}},{key:"reset",value:function(){return this.box=this.initializeBox(this.options),this.redraw(),null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue()),this}}]),a}(function(){function n(t,i){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e(this,n),this.options=n.parseOptions(i||{}),!t.nodeName&&null==(t=document.querySelector(t)))throw"Unable to find element.";if(!t.getAttribute("src"))throw"Image src not provided.";this._initialized=!1,this._restore={parent:t.parentNode,element:t},a||(0===t.width||0===t.height?t.onload=function(){r.initialize(t)}:this.initialize(t))}return t(n,[{key:"initialize",value:function(e){this.createDOM(e),this.options.convertToPixels(this.cropperEl),this.attachHandlerEvents(),this.attachRegionEvents(),this.attachOverlayEvents(),this.box=this.initializeBox(this.options),this.redraw(),this._initialized=!0,null!==this.options.onInitialize&&this.options.onInitialize(this)}},{key:"createDOM",value:function(e){var t;this.containerEl=document.createElement("div"),this.containerEl.className="croppr-container",this.eventBus=this.containerEl,(t=this.containerEl).addEventListener("touchstart",o),t.addEventListener("touchend",o),t.addEventListener("touchmove",o),this.cropperEl=document.createElement("div"),this.cropperEl.className="croppr",this.imageEl=document.createElement("img"),this.imageEl.setAttribute("src",e.getAttribute("src")),this.imageEl.setAttribute("alt",e.getAttribute("alt")),this.imageEl.className="croppr-image",this.imageClippedEl=this.imageEl.cloneNode(),this.imageClippedEl.className="croppr-imageClipped",this.regionEl=document.createElement("div"),this.regionEl.className="croppr-region",this.overlayEl=document.createElement("div"),this.overlayEl.className="croppr-overlay";var n=document.createElement("div");n.className="croppr-handleContainer",this.handles=[];for(var i=0;i<l.length;i++){var r=new a(l[i].position,l[i].constraints,l[i].cursor,this.eventBus);this.handles.push(r),n.appendChild(r.el)}this.cropperEl.appendChild(this.imageEl),this.cropperEl.appendChild(this.imageClippedEl),this.cropperEl.appendChild(this.regionEl),this.cropperEl.appendChild(this.overlayEl),this.cropperEl.appendChild(n),this.containerEl.appendChild(this.cropperEl),e.parentElement.replaceChild(this.containerEl,e)}},{key:"setImage",value:function(e){var t=this;return this.imageEl.onload=function(){t.box=t.initializeBox(t.options),t.redraw()},this.imageEl.src=e,this.imageClippedEl.src=e,this}},{key:"destroy",value:function(){this._restore.parent.replaceChild(this._restore.element,this.containerEl)}},{key:"initializeBox",value:function(e){var t=e.startSize.width,n=e.startSize.height,i=new s(0,0,t,n);i.constrainToRatio(e.aspectRatio,[.5,.5]);var r=e.minSize,a=e.maxSize;i.constrainToSize(a.width,a.height,r.width,r.height,[.5,.5],e.aspectRatio);var o=this.cropperEl.offsetWidth,l=this.cropperEl.offsetHeight;i.constrainToBoundary(o,l,[.5,.5]);var u=this.cropperEl.offsetWidth/2-i.width()/2,c=this.cropperEl.offsetHeight/2-i.height()/2;return i.move(u,c),i}},{key:"redraw",value:function(){var e=this,t=Math.round(this.box.width()),n=Math.round(this.box.height()),i=Math.round(this.box.x1),r=Math.round(this.box.y1),a=Math.round(this.box.x2),s=Math.round(this.box.y2);window.requestAnimationFrame((function(){e.regionEl.style.transform="translate("+i+"px, "+r+"px)",e.regionEl.style.width=t+"px",e.regionEl.style.height=n+"px",e.imageClippedEl.style.clip="rect("+r+"px, "+a+"px, "+s+"px, "+i+"px)";for(var o=e.box.getAbsolutePoint([.5,.5]),l=o[0]-e.cropperEl.offsetWidth/2>>31,u=o[1]-e.cropperEl.offsetHeight/2>>31,c=-2*((l^u)+u+u+4)+8,d=0;d<e.handles.length;d++){var p=e.handles[d],m=p.el.offsetWidth,h=p.el.offsetHeight,_=i+t*p.position[0]-m/2,f=r+n*p.position[1]-h/2;p.el.style.transform="translate("+Math.round(_)+"px, "+Math.round(f)+"px)",p.el.style.zIndex=c==d?5:4}}))}},{key:"attachHandlerEvents",value:function(){var e=this.eventBus;e.addEventListener("handlestart",this.onHandleMoveStart.bind(this)),e.addEventListener("handlemove",this.onHandleMoveMoving.bind(this)),e.addEventListener("handleend",this.onHandleMoveEnd.bind(this))}},{key:"attachRegionEvents",value:function(){var e=this.eventBus;function t(t){t.stopPropagation(),e.dispatchEvent(new CustomEvent("regionmove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function n(i){i.stopPropagation(),document.removeEventListener("mouseup",n),document.removeEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionend",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))}this.regionEl.addEventListener("mousedown",(function(i){i.stopPropagation(),document.addEventListener("mouseup",n),document.addEventListener("mousemove",t),e.dispatchEvent(new CustomEvent("regionstart",{detail:{mouseX:i.clientX,mouseY:i.clientY}}))})),e.addEventListener("regionstart",this.onRegionMoveStart.bind(this)),e.addEventListener("regionmove",this.onRegionMoveMoving.bind(this)),e.addEventListener("regionend",this.onRegionMoveEnd.bind(this))}},{key:"attachOverlayEvents",value:function(){var e=this,t=null;function n(t){t.stopPropagation(),e.eventBus.dispatchEvent(new CustomEvent("handlemove",{detail:{mouseX:t.clientX,mouseY:t.clientY}}))}function i(r){r.stopPropagation(),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",n),1!==e.box.width()||1!==e.box.height()?e.eventBus.dispatchEvent(new CustomEvent("handleend",{detail:{mouseX:r.clientX,mouseY:r.clientY}})):e.box=t}this.overlayEl.addEventListener("mousedown",(function(r){r.stopPropagation(),document.addEventListener("mouseup",i),document.addEventListener("mousemove",n);var a=e.cropperEl.getBoundingClientRect(),o=r.clientX-a.left,l=r.clientY-a.top;t=e.box,e.box=new s(o,l,o+1,l+1),e.eventBus.dispatchEvent(new CustomEvent("handlestart",{detail:{handle:e.handles[4]}}))}))}},{key:"onHandleMoveStart",value:function(e){var t=e.detail.handle,n=[1-t.position[0],1-t.position[1]],i=this.box.getAbsolutePoint(n),a=r(i,2),s=a[0],o=a[1];this.activeHandle={handle:t,originPoint:n,originX:s,originY:o},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onHandleMoveMoving",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,r=this.cropperEl.getBoundingClientRect();n-=r.left,i-=r.top,n<0?n=0:n>r.width&&(n=r.width),i<0?i=0:i>r.height&&(i=r.height);var a=this.activeHandle.originPoint.slice(),o=this.activeHandle.originX,l=this.activeHandle.originY,u=this.activeHandle.handle,c=1===u.constraints[0],d=1===u.constraints[1],p=1===u.constraints[2],m=1===u.constraints[3],h=(m||d)&&(c||p),_=m||d?o:this.box.x1,f=m||d?o:this.box.x2,v=c||p?l:this.box.y1,g=c||p?l:this.box.y2;_=m?n:_,f=d?n:f,v=c?i:v,g=p?i:g;var w=!1,y=!1;if((m||d)&&(w=m?n>o:n<o),(c||p)&&(y=c?i>l:i<l),w){var x=_;_=f,f=x,a[0]=1-a[0]}if(y){var b=v;v=g,g=b,a[1]=1-a[1]}var k=new s(_,v,f,g);if(this.options.aspectRatio){var E=this.options.aspectRatio,q=!1;h?q=i>k.y1+E*k.width()||i<k.y2-E*k.width():(c||p)&&(q=!0);var S=q?"width":"height";k.constrainToRatio(E,a,S)}var N=this.options.minSize,C=this.options.maxSize;k.constrainToSize(C.width,C.height,N.width,N.height,a,this.options.aspectRatio);var M=this.cropperEl.offsetWidth,O=this.cropperEl.offsetHeight;k.constrainToBoundary(M,O,a),this.box=k,this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onHandleMoveEnd",value:function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"onRegionMoveStart",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,r=this.cropperEl.getBoundingClientRect();n-=r.left,i-=r.top,this.currentMove={offsetX:n-this.box.x1,offsetY:i-this.box.y1},null!==this.options.onCropStart&&this.options.onCropStart(this.getValue())}},{key:"onRegionMoveMoving",value:function(e){var t=e.detail,n=t.mouseX,i=t.mouseY,r=this.currentMove,a=r.offsetX,s=r.offsetY,o=this.cropperEl.getBoundingClientRect();n-=o.left,i-=o.top,this.box.move(n-a,i-s),this.box.x1<0&&this.box.move(0,null),this.box.x2>o.width&&this.box.move(o.width-this.box.width(),null),this.box.y1<0&&this.box.move(null,0),this.box.y2>o.height&&this.box.move(null,o.height-this.box.height()),this.redraw(),null!==this.options.onCropMove&&this.options.onCropMove(this.getValue())}},{key:"onRegionMoveEnd",value:function(e){null!==this.options.onCropEnd&&this.options.onCropEnd(this.getValue())}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e&&(e=this.options.returnMode),"real"==e){var t=this.imageEl.naturalWidth,n=this.imageEl.naturalHeight,i=this.imageEl.getBoundingClientRect(),r=i.width,a=i.height,s=t/r,o=n/a;return{x:Math.round(this.box.x1*s),y:Math.round(this.box.y1*o),width:Math.round(this.box.width()*s),height:Math.round(this.box.height()*o)}}if("ratio"==e){var l=this.imageEl.getBoundingClientRect(),c=l.width,d=l.height;return{x:u(this.box.x1/c,3),y:u(this.box.y1/d,3),width:u(this.box.width()/c,3),height:u(this.box.height()/d,3)}}if("raw"==e)return{x:Math.round(this.box.x1),y:Math.round(this.box.y1),width:Math.round(this.box.width()),height:Math.round(this.box.height())}}}],[{key:"parseOptions",value:function(e){var t=null,n={width:null,height:null},i={width:null,height:null},r={width:100,height:100,unit:"%"},a="real",s=null,o=null,l=null,u=null,c=null;void 0!==e.aspectRatio&&("number"==typeof e.aspectRatio?c=e.aspectRatio:e.aspectRatio instanceof Array&&(c=e.aspectRatio[1]/e.aspectRatio[0]));var d=null;void 0!==e.maxSize&&null!==e.maxSize&&(d={width:e.maxSize[0]||null,height:e.maxSize[1]||null,unit:e.maxSize[2]||"px"});var p=null;void 0!==e.minSize&&null!==e.minSize&&(p={width:e.minSize[0]||null,height:e.minSize[1]||null,unit:e.minSize[2]||"px"});var m=null;void 0!==e.startSize&&null!==e.startSize&&(m={width:e.startSize[0]||null,height:e.startSize[1]||null,unit:e.startSize[2]||"%"});var h=null;"function"==typeof e.onInitialize&&(h=e.onInitialize);var _=null;"function"==typeof e.onCropStart&&(_=e.onCropStart);var f=null;"function"==typeof e.onCropEnd&&(f=e.onCropEnd);var v=null;"function"==typeof e.onUpdate&&(console.warn("Croppr.js: `onUpdate` is deprecated and will be removed in the next major release. Please use `onCropMove` or `onCropEnd` instead."),v=e.onUpdate),"function"==typeof e.onCropMove&&(v=e.onCropMove);var g=null;if(void 0!==e.returnMode){var w=e.returnMode.toLowerCase();if(-1===["real","ratio","raw"].indexOf(w))throw"Invalid return mode.";g=w}var y=function(e,t){return null!==e?e:t};return{aspectRatio:y(c,t),maxSize:y(d,n),minSize:y(p,i),startSize:y(m,r),returnMode:y(g,a),onInitialize:y(h,s),onCropStart:y(_,o),onCropMove:y(v,l),onCropEnd:y(f,u),convertToPixels:function(e){for(var t=e.offsetWidth,n=e.offsetHeight,i=["maxSize","minSize","startSize"],r=0;r<i.length;r++){var a=i[r];null!==this[a]&&("%"==this[a].unit&&(null!==this[a].width&&(this[a].width=this[a].width/100*t),null!==this[a].height&&(this[a].height=this[a].height/100*n)),delete this[a].unit)}}}}}]),n}())}()},function(e,t,n){},function(e,t,n){"use strict";n.r(t);n(1);const{createElement:i,render:r}=wp.element;var a=e=>i("div",{class:"lds-ellipsis"},i("div",null),i("div",null),i("div",null),i("div",null));const{Component:s,createElement:o,render:l,useState:u,useEffect:c,Fragment:d}=wp.element;var p=e=>{const[t,n]=u(e.duration),[i,r]=u({d:0,h:0,m:0,s:0});c(()=>{if(e.start){setTimeout(()=>{let i=t-1;i<=-1?e.update(e.quiz_id,"expired"):i>=0&&(n(i),a())},1e3)}else n(e.duration),a()},[t,e.start,e.duration]);const a=()=>{let e={...i},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};return o("div",{className:"driptimer_wrapper"},o("div",{className:"driptimer"},o("span",{className:"timer_amount"},i.d?o(d,null,o("span",null,i.d),o("span",null,":")):"",i.h?o(d,null,o("span",null,i.h),o("span",null,":")):"",i.m?o(d,null,o("span",null,i.m),o("span",null,":")):"",o("span",null,i.s)),o("span",{className:"timer_unit"},i.d?o(d,null,o("span",null,window.wplms_course_data.translations.days),o("span",null)):"",i.h?o(d,null,o("span",null,window.wplms_course_data.translations.hours),o("span",null)):"",i.m?o(d,null,o("span",null,window.wplms_course_data.translations.minutes),o("span",null)):"",o("span",null,window.wplms_course_data.translations.seconds))))},m=n(0),h=n.n(m);const{createElement:_,useState:f,useEffect:v,useRef:g,Fragment:w,render:y}=wp.element,{dispatch:x,select:b}=wp.data,k=Math.round(100*Math.random());var E=e=>{const t=g(null),[n,i]=f(!1),[r,a]=f(!1),[s,o]=f(""),[l,u]=f(""),[c,d]=f(""),[p,m]=f(""),[w,y]=f({x:0,y:0,width:0,height:0,type:"image"}),[x,b]=f(""),[E,q]=f(window.wplms_course_data.translations.select_image);v(()=>{e.hasOwnProperty("crop")&&e.crop&&i(!0)},[]),v(()=>{if(r&&x&&n)new h.a(x,{returnMode:"ratio",onCropEnd:function(t){let n={...w};n.x=100*t.x,n.y=100*t.y,n.height=100*t.height,n.width=100*t.width,y(n);let i={x:x.naturalWidth*t.x,y:x.naturalHeight*t.y,width:x.naturalWidth*t.width,height:x.naturalHeight*t.height};e.update(p,i)}})},[r,x]);w.x,w.y,w.width,w.height;return _("div",{className:"uploader"},_("label",{for:"fileupload_"+k,className:"upload_file"},E,"image"==e.type?_("input",{id:"fileupload_"+k,"data-type":e.type,ref:t,type:"file",accept:"image/*",onChange:n=>{t.current.files[0].size<window.wplms_course_data.settings.upload_limit?(o(window.URL.createObjectURL(t.current.files[0])),m(t.current.files[0]),e.update(t.current.files[0],{...w,key:"image"})):(q(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{q(window.wplms_course_data.translations.select_image)},3500))}}):"video"==e.type?_("input",{id:"fileupload_"+k,"data-type":e.type,ref:t,type:"file",accept:"video/*",onChange:n=>{t.current.files[0].size<window.wplms_course_data.settings.upload_limit?(u(window.URL.createObjectURL(t.current.files[0])),m(t.current.files[0]),e.update(t.current.files[0],{...w,key:"video"})):(q(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{q(window.wplms_course_data.translations.select_image)},3500))}}):_("input",{id:"fileupload_"+k,"data-type":e.type,ref:t,type:"file",onChange:n=>{t.current.files&&t.current.files[0]&&(t.current.files[0].size<e.args.allowed_file_size?-1!==e.args.allowed_mime_types.indexOf(t.current.files[0].type)?(d(window.URL.createObjectURL(t.current.files[0])),m(t.current.files),e.update(t.current.files,{...w,key:"attachment"})):(q(window.wplms_course_data.translations.image_type_error),setTimeout(()=>{q(window.wplms_course_data.translations.select_image)},3500)):(q(window.wplms_course_data.translations.image_size_error),setTimeout(()=>{q(window.wplms_course_data.translations.select_image)},3500)))}})))};const{Component:q,createElement:S,render:N,useState:C,useEffect:M,Fragment:O}=wp.element;var z=e=>{const[t,n]=C(e.duration),[i,r]=C({d:0,h:0,m:0,s:0});M(()=>{if(e.start){setTimeout(()=>{let i=t-1;i<=-1?e.update(e.quiz_id,"expired"):i>=0&&(n(i),a())},1e3)}else n(e.duration),a()},[t,e.start,e.duration]);const a=()=>{let e={...i},n=t;n>86400?(e.d=Math.floor(n/86400),n-=86400*e.d):e.d=0,n>3600?(e.h=Math.floor(n/3600),n-=3600*e.h):e.h=0,n>60?(e.m=Math.floor(n/60),n-=60*e.m):e.m=0,e.s=n,r(e)};let s="c100 p0 big";if(t>-1){let n=Math.floor((e.duration-t)/e.duration*100);n<=0&&(n=1),s="c100 p"+n+" big"}return S("div",{className:"quiztimer"},S(O,null,S("div",{className:"circle_timer"},S("div",{className:s},S("span",null,S("span",{className:"timer_amount"},i.d?S(O,null,S("span",null,i.d),S("span",null,":")):"",i.h?S(O,null,S("span",null,i.h),S("span",null,":")):"",i.m?S(O,null,S("span",null,i.m),S("span",null,":")):"",S("span",null,i.s)),S("span",{className:"timer_unit"},i.d?S(O,null,S("span",null,window.wplms_course_data.translations.days),S("span",null)):"",i.h?S(O,null,S("span",null,window.wplms_course_data.translations.hours),S("span",null)):"",i.m?S(O,null,S("span",null,window.wplms_course_data.translations.minutes),S("span",null)):"",S("span",null,window.wplms_course_data.translations.seconds))),S("div",{className:"slice"},S("div",{className:"bar"}),S("div",{className:"fill"}))))))};const{createContext:I}=wp.element;var P=I({course:{},activeTab:"create_course",update:e=>{}});const{createElement:B,render:T,useState:A,useEffect:L,useContext:H,Fragment:R,RawHTML:D}=wp.element;var F=e=>{const[t,n]=A(e.field),[i,r]=(H(P),A({post_content:"",raw:{}})),[a,s]=A(Math.round(1e5*Math.random()));L(()=>{if(e.field&&e.field.id){var t=new CustomEvent("load_vibe_editor",{detail:{selector:".vibe_"+e.field.id+a+"_editor",content:e.field.hasOwnProperty("value")?e.field.value:"",raw:e.field.hasOwnProperty("raw")?e.field.raw:"",components:e.field.components?e.field.components:"",updater:e.field.id+a}});document.dispatchEvent(t)}},[e.field]),L(()=>(e.field&&e.field.id&&document.addEventListener("vibe_editor_content_update_"+e.field.id+a,o,!1),()=>{e.field&&e.field.id&&document.removeEventListener("vibe_editor_content_update_"+e.field.id+a,o)}),[]);const o=t=>{console.log("captured"),r({post_content:t.detail.raw_html,raw:t.detail.editor_content});let i={...e.field};i.value=t.detail.raw_html,i.raw=t.detail.editor_content,n(i),e.update(i,e.fieldIndex,"fieldvaluechanged")};return B("div",{className:"vibev_editor"},B("div",{className:"vibe_"+t.id+a+"_editor"},B("textarea",{value:t.value})))};const{createContext:j}=wp.element;var X=j({courseStatus:{},current_unit_key:0,update:e=>{}});var Y=function(e){if(void 0===e)return!0;if("undefined"===e)return!0;if(null==e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};const{createElement:U,useState:W,useEffect:V,Fragment:J,render:$,useContext:K}=wp.element,{dispatch:G,select:Q}=wp.data;var Z=e=>{const[t,n]=W(!0),[i,r]=W({}),[s,o]=W([]),[l,u]=W(""),[c,d]=W(!1);K(X);let p=Q("vibebp").getUser();p.token=Q("vibebp").getToken(),V(()=>{n(!0),fetch(`${window.wplms_course_data.api_url}/user/content/assignmentId/${e.assignment.id}`,{method:"post",body:JSON.stringify({token:p.token})}).then(e=>e.json()).then(e=>{e&&(e.hasOwnProperty("remaining")&&(e.duration=e.remaining),e.hasOwnProperty("comment_content")&&u(e.comment_content),r(e),n(!1))}),document.addEventListener("wplms_assignment_custom_upload",({detail:e})=>{if(e.hasOwnProperty("data")&&e.data.hasOwnProperty("Key")&&e.data.Key.length){let t=[...s],n=e.data.Key.split("/");t.push({...e.data,name:n[n.length-1]}),o(t)}})},[e.assignment]);const m=(t=null)=>{let n=l;if(!t&&i&&i.type&&"upload"==i.type){if(!s||s.length<=0)return alert(window.wplms_course_data.translations.upload_a_file),!1;Y(n)&&(n=i.title+" - "+(p.displayname?p.displayname:p.name?p.name:""))}else if(t&&Y(n)&&(n=i.title+" - "+(p.displayname?p.displayname:p.name?p.name:"")),!n||n.length<=3)return alert(window.wplms_course_data.translations.error),!1;d(!0);var a=new FormData;a.append("body",JSON.stringify({comment:n,attachments:s,token:Q("vibebp").getToken()})),s.length&&s.map((e,t)=>{e instanceof File?a.append("files_"+t,e):a.append("files_"+t,JSON.stringify(e))}),fetch(`${window.wplms_course_data.api_url}/user/upload/assignmentId/${e.assignment.id}`,{method:"post",body:a}).then(e=>e.json()).then(t=>{if(d(!1),t){let n={...i};t.attachment_urls&&t.attachment_urls.length&&(n.attachment_urls=t.attachment_urls),t.comment_id&&(n.flag=1,n.already_submitted=!0,e.hasOwnProperty("unitIndex")?e.update({unitIndex:e.unitIndex,assignmentIndex:e.assignmentIndex},"complete"):e.update({},"submitassignment")),r(n)}})};let h={allowed_mime_types:i.permit_mime,allowed_file_size:parseInt(i.permit_size)};return t?U(a,null):U("div",{className:"course_assignment_wrapper"},U("div",{className:"course_assignment"},U("div",{className:"assignment_details"},U("div",{className:"assignment_marks"},U("span",null,i.total_marks),U("span",null,window.wplms_course_data.translations.total_marks)),U(z,{duration:i.duration,update:(e,t)=>{"expired"==t&&(i.already_submitted||m(!0))},quiz_id:i.id,start:i.start})),U("div",{className:"assignment_content_wrapper"},U("div",{className:"assignment_content",dangerouslySetInnerHTML:{__html:i.content}}),i.type&&"upload"==i.type&&i&&i.permit_extension&&i.permit_extension.length&&i.flag<=2?U("div",{className:"allowed_file_extenstions"},U("label",null,window.wplms_course_data.translations.allowed_file_extenstions),i.permit_extension.map(e=>U("span",null,e))):"",i.start?"":U("a",{className:"assignment_start_button button is-primary",onClick:()=>{fetch(`${window.wplms_course_data.api_url}/user/start/assignmentId/${e.assignment.id}`,{method:"post",body:JSON.stringify({token:Q("vibebp").getToken()})}).then(e=>e.json()).then(e=>{if(e&&e.start){let e={...i};e.start=!0,r(e)}})}},window.wplms_course_data.translations.start_assigmment),i.start&&i.flag<=2?U(J,null,i.already_submitted?U(J,null,i.attachment_urls&&i.attachment_urls.length?U(J,null,window.wplms_course_data.translations.uploaded_files,U("div",{className:"assignment_attachments"},i.attachment_urls.map((e,t)=>U("div",null,U("a",{href:e.url,target:"_blank",download:!0},e.name))))):"",i.hasOwnProperty("flag")&&1==i.flag&&i.duration>0?U("div",{className:"resubmit ",onClick:()=>{(()=>{let t={...i};t.already_submitted=!1,t.flag=0,e.hasOwnProperty("unitIndex")?e.update({unitIndex:e.unitIndex,assignmentIndex:e.assignmentIndex},"retake"):e.update({},"retookassignment"),r(t)})()}},U("a",{className:"button is-primary"},window.wplms_course_data.translations.resubmit,U("span",{className:"vicon vicon-close"}))):""):"",i.type&&"upload"==i.type&&!i.already_submitted?U("div",{className:"upload_assignment"},i.hasOwnProperty("custom_upload")&&i.custom_upload?U("div",null,(_=new CustomEvent("custom_assignment_upload",{detail:{data:i}}),document.dispatchEvent(_),U("div",{className:"custom_assignment_upload",id:i.custom_upload}))):U(E,{type:1,update:(e,t)=>{let n=[...s];n.push(new File([e[0]],e[0].name)),o(n)},args:h}),s?U("div",{className:"assignment_attachments"},s.map((e,t)=>U("div",null,U("span",null,e.name),U("span",{className:"vicon vicon-close",onClick:()=>{(e=>{let t=[...s];t.splice(e,1),o(t)})(t)}})))):"",U(F,l?{field:{id:"assignment_text",value:l,components:["editor"]},update:(e,t,n)=>{u(e.value)}}:{field:{id:"assignment_text",components:["editor"]},update:(e,t,n)=>{u(e.value)}})):"",!i.hasOwnProperty("type")||i.type&&"textarea"==i.type?U(F,{field:l?{id:"assignment_text",value:l,components:["editor"]}:{id:"assignment_text",components:["editor"]},update:(e,t,n)=>{u(e.value)}}):""):"",i.flag&&i.hasOwnProperty("marks")&&i.flag>1?U("div",{className:"assigment_evaluated"},i.message?U("span",null,i.message):"",i.marks?U("span",null,window.wplms_course_data.translations.marks_obtained," : ",i.marks):"",i.hasOwnProperty("instructor_remarks")?U("div",{className:"remarks"},U("h3",null,window.wplms_course_data.translations.instructor_remarks," "),U("div",{dangerouslySetInnerHTML:{__html:i.instructor_remarks}})):""):"")),i.start&&!i.already_submitted?U("a",{className:c?"button is-primary is-loading":"button is-primary",onClick:()=>{m()}},window.wplms_course_data.translations.submit_assignment):"");var _};const{createElement:ee,render:te,useState:ne,useEffect:ie,useContext:re,Fragment:ae,RawHTML:se}=wp.element,{dispatch:oe,select:le}=wp.data;var ue=e=>{const[t,n]=ne(e.timestamp),[i,r]=ne(0);let a=Math.floor(Date.now()/1e3);ie(()=>{if(n(parseInt(e.timestamp)),e.timestamp)if(e.hasOwnProperty("notimediff"))r(parseInt(e.timestamp));else{e.timestamp.toString().includes("-")&&(e.timestamp=new Date(e.timestamp).getTime()/1e3),parseInt(e.timestamp)>a?r(parseInt(e.timestamp)-a):r(a-parseInt(e.timestamp))}},[e.timestamp]);return ee("span",{className:"friendly_time"},(()=>{if(i<0)return window.wplms_course_data.translations.expired;let t,n,r,a=0,s=0,o=0,l=[{label:window.wplms_course_data.time_labels.year.single,multi:window.wplms_course_data.time_labels.year.multi,value:31536e3},{label:window.wplms_course_data.time_labels.month.single,multi:window.wplms_course_data.time_labels.month.multi,value:2592e3,max:12},{label:window.wplms_course_data.time_labels.week.single,multi:window.wplms_course_data.time_labels.week.multi,value:604800,max:7},{label:window.wplms_course_data.time_labels.day.single,multi:window.wplms_course_data.time_labels.day.multi,value:86400,max:31},{label:window.wplms_course_data.time_labels.hour.single,multi:window.wplms_course_data.time_labels.hour.multi,value:3600,max:24},{label:window.wplms_course_data.time_labels.minute.single,multi:window.wplms_course_data.time_labels.minute.multi,value:60,max:60},{label:window.wplms_course_data.time_labels.second.single,multi:window.wplms_course_data.time_labels.second.multi,value:1,max:60}];if(i>=776736e3)return window.wplms_course_data.translations.unlimited_time;if(i<=0)return e.hasOwnProperty("notimediff")?i+" "+window.wplms_course_data.time_labels.second.multi:window.wplms_course_data.translations.just_now;for(let e=0;e<l.length;e++)if(n=l[e],s=e,n.value<i){a=Math.floor(i/n.value),a>n.max&&(a=n.max);break}return t=a+" "+(a>1?n.multi:n.label),n.value>1&&(r=l[s+1],o=Math.floor(i%n.value/r.value),o&&(t+=", "+o+" "+(o>1?r.multi:r.label))),t})())};const{createElement:ce,useState:de,useEffect:pe,Fragment:me,render:he,useRef:_e}=wp.element,{dispatch:fe,select:ve}=wp.data;const{createElement:ge,render:we,useState:ye,useEffect:xe,Fragment:be,useContext:ke,useRef:Ee}=wp.element,{dispatch:qe,select:Se}=wp.data;var Ne=e=>{const t=Ee(null),[n,i]=ye(!1),[r,a]=ye(!1),s=(e,t)=>{console.log(e,t),void 0===t&&(t=window.location.href);var n=t.match("[?&]"+e+"=([^&]+)");return n?n[1]:null};xe(()=>{if(l(),document.querySelector("#item_"+e.index)){let t={};if("youtube"==e.provider&&(t.youtube={modestbranding:1}),window.wplms_course_data.course.status.seek_lock&&(t.listeners={seek:e=>{var t=n.currentTime;if(_getTargetTime(n,e)>t)return e.preventDefault(),!1}}),e.hasOwnProperty("src")&&"mpd"==e.src.split(".").pop())dashjs.MediaPlayer().create().initialize(document.querySelector("#item_"+e.index),e.src,!0);let l=new Plyr(document.querySelector("#item_"+e.index),t);if(e.hasOwnProperty("src")&&"m3u8"==e.src.split(".").pop())if(Hls.isSupported()){const t=new Hls;t.loadSource(e.src),t.attachMedia(document.querySelector("#item_"+e.index))}else document.querySelector("#item_"+e.index).src=e.src;a(l),l.once("loadeddata",()=>{let t=localStorage.getItem(e.url);t&&t<=r.duration&&(l.currentTime=t),i({plyr:l,url:e.url})}),l.once("ready",()=>{if("youtube"==e.provider){let t=s("t",e.url);t&&void 0!==t||(t=s("start",e.url)),t&&(l.currentTime=t)}}),l.once("ended",o)}return()=>{l()}},[e.url]);const o=t=>{e.update("ended",{index:e.index,src:e.url,event:t})},l=()=>{if(document.querySelector(".video_wrapper > div").remove(),"youtube"==e.provider)(t=document.createElement("div")).setAttribute("id","item_"+e.index),t.setAttribute("data-plyr-provider","youtube"),t.setAttribute("data-plyr-embed-id",e.embed_id);else if("vimeo"==e.provider){(t=document.createElement("div")).setAttribute("id","item_"+e.index),t.setAttribute("data-plyr-provider","vimeo"),t.setAttribute("data-plyr-embed-id",e.embed_id)}else{var t=document.createElement("div"),n=document.createElement("video");n.setAttribute("id","item_"+e.index);var i=document.createElement("source");i.setAttribute("src",e.src),i.setAttribute("type",e.mime_type),n.appendChild(i),t.appendChild(n)}document.querySelector(".video_wrapper").appendChild(t)};return ge("div",{className:"video_wrapper"},"youtube"==e.provider?ge("div",{ref:t,id:"item_"+e.index,"data-plyr-provider":"youtube","data-plyr-embed-id":e.embed_id}):"vimeo"==e.provider?ge("div",{ref:t,id:"item_"+e.index,"data-plyr-provider":"vimeo","data-plyr-embed-id":e.embed_id}):"local"==e.provider?ge("div",null,ge("video",{className:"activity_meta video",ref:t,id:"item_"+e.index},ge("source",{src:e.src,type:e.mime_type}))):"")};const{createElement:Ce,render:Me,useState:Oe,useEffect:ze,Fragment:Ie}=wp.element;var Pe=e=>{const[t,n]=Oe({});ze(()=>{n(e.question)},[e.question]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),Ce(Ie,null,Ce("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ce("input",{type:"text",className:r,value:i,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}))};const{createElement:Be,render:Te,useState:Ae,useEffect:Le,Fragment:He}=wp.element;var Re=e=>{const[t,n]=Ae({}),[i,r]=Ae([]);Le(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&a(t),r(t)}},[e.question.correct_indexes]);const a=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}};let s="";return t.hasOwnProperty("marked_answer")&&(s=t.marked_answer),Be(He,null,Be("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Be(He,null,(t=>i.map((function(i,r){let a=t.options.findIndex(e=>e==i);return Be("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(a)?"question_correct":"question_incorrect":"")},Be("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:a,id:e.quiz_id+"_"+t.id+a,checked:parseInt(t.marked_answer)===a,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}),Be("label",{for:e.quiz_id+"_"+t.id+a,dangerouslySetInnerHTML:{__html:i}}))})))(t),t.attempted?"":Be("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i),e.update(i,e.index,"changed")}},Be("i",{class:"vicon vicon-trash"}))):"")};const{createElement:De,render:Fe,useState:je,useEffect:Xe,Fragment:Ye}=wp.element;var Ue=e=>{const[t,n]=je({});Xe(()=>{n(e.question)},[e.question]);const i=(t,i)=>{let r={...e.question};r.marked_answer&&r.marked_answer.length||(r.marked_answer=[]),r.marked_answer[i]=t,n(r),e.update(r,e.index,"changed")},r=(t,n)=>De(Ye,null,De("span",{className:t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":""},De("select",{name:e.quiz_id+"_"+t.id,id:e.quiz_id+"_"+t.id,onChange:e=>{i(e.target.value,n)}},De("option",null,window.wplms_course_data.translations.select_option),((e,t)=>e.options.map((function(n,i){return e.hasOwnProperty("options_arr")&&e.options_arr&&e.options_arr.length&&e.options_arr[t]&&e.options_arr[t].length?e.options_arr[t].includes((i+1).toString())||e.options_arr[t].includes(i+1)?De("option",{value:i,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===i,dangerouslySetInnerHTML:{__html:n}}):void 0:De("option",{value:i,selected:e.marked_answer&&e.marked_answer.length&&e.marked_answer[t]&&parseInt(e.marked_answer[t])===i,dangerouslySetInnerHTML:{__html:n}})})))(t,n))),t.attempted?"":De("span",{className:"resetq_answer button",onClick:e=>{i(null,n)}},De("i",{class:"vicon vicon-trash"})));return De(Ye,null,t&&t.extra_content&&Array.isArray(t.extra_content)?De("div",{className:"question_content"},t.extra_content.map((function(e,n){return De(Ye,null,De("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),t.options&&t.options.length&&n<t.extra_content.length-1?De(Ye,null,r(t,n)):"")}))):"")};const{createElement:We,render:Ve,useState:Je,useEffect:$e,Fragment:Ke}=wp.element;var Ge=e=>{const[t,n]=Je({}),[i,r]=Je([]);"undefined"!=e.question.marked_answer&&null!=e.question.marked_answer||(e.question.marked_answer=[]),$e(()=>{if(n(e.question),e.question.hasOwnProperty("options")&&e.question.options.length&&Array.isArray(e.question.options)){let t=[...e.question.options];window.wplms_course_data.question_option_rearrange&&a(t),r(t)}},[e.question.correct_indexes]);const a=e=>{for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}};return We(Ke,null,We("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?We(Ke,null,(t=>{if(i&&i.length)return i.map((function(i,r){let a=t.options.findIndex(e=>e==i);return We("div",{className:"question_option checkbox "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(a)?"question_correct":"question_incorrect":"")},We("input",{type:"checkbox",name:e.quiz_id+"_"+t.id,value:a,id:e.quiz_id+"_"+t.id+a,checked:e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.includes(a),onChange:t=>{let i={...e.question};if(i.marked_answer.includes(a)){let e=i.marked_answer.indexOf(a);e>-1&&i.marked_answer.splice(e,1)}else i.marked_answer.push(a);n(i),e.update(i,e.index,"changed")}}),We("label",{for:e.quiz_id+"_"+t.id+a,dangerouslySetInnerHTML:{__html:i}}))}))})(t),t.attempted?"":We("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i),e.update(i,e.index,"changed")}},We("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Qe,render:Ze,useState:et,useEffect:tt,Fragment:nt}=wp.element;var it=e=>{const[t,n]=et("120"),[i,r]=et(()=>{let t="";return e.marked_answer&&e.marked_answer.length&&(t=e.marked_answer[e.index]),t});tt(()=>{i.length>15&&n(8*i.length)},[i]);let a="";i&&(a=i);return Qe(nt,null,Qe("div",{className:"fillblank_area"},Qe("input",{type:"text",value:a,onChange:t=>{let n=i;n=t.target.value,r(n),e.update(n,e.index,"changed")},style:{width:t+"px"}})))};const{createElement:rt,render:at,useState:st,useEffect:ot,Fragment:lt}=wp.element;var ut=e=>{const[t,n]=st({});ot(()=>{n(e.question)},[]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);const r=(i,r,a)=>{if("changed"==a){let a={...t};a.marked_answer&&t.marked_answer.length||(a.marked_answer=[]),a.marked_answer[r]=i,n(a),e.update(a,e.index,"changed")}};return rt(lt,null,t&&t.extra_content&&Array.isArray(t.extra_content)?rt("div",{className:"question_content"},t.extra_content.map((function(e,n){return rt(lt,null,rt("span",{className:"select_question_content",dangerouslySetInnerHTML:{__html:e}}),n<t.extra_content.length-1?rt("div",{className:"fillblank_area "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(n)?"question_correct":"question_incorrect":"")},rt(it,{update:r,index:n,marked_answer:t.marked_answer})):"")}))):"")};const{createElement:ct,render:dt,useState:pt,useEffect:mt,Fragment:ht}=wp.element;var _t=e=>{const[t,n]=pt([]),[i,r]=pt(!1),[a,s]=pt([]),[o,l]=pt([]),[u,c]=pt([]),[d,p]=pt([]);mt(()=>{s(e.items)},[e.items]);let m="droppable";i&&(m+=" active");const h=e=>{let t="";return i===a[e]&&(t="dragging"),t};return ct("div",{className:m},a.map((m,_)=>ct("div",{key:_,onDragStart:e=>{a[_]&&r(a[_])},onDragEnd:()=>{r(!1)},onDragOver:t=>{t.preventDefault(),((t,n)=>{if(!i)return;let r=a[n];if(i===r)return;let o=[...a];o=o.filter(e=>e!=i),o.splice(n,0,i),s(o),e.update(o,"changed")})(0,_)},ref:e=>{((e,i)=>{if(e){let r=t;r[i]||(r[i]=e),n(r)}})(e,_)},draggable:"true",style:d[_],onTouchStart:e=>{let n=[...u];t.map((e,t)=>{let i=e.getBoundingClientRect();n[t]=i}),c(n),a[_]&&r(a[_])},onTouchMove:e=>{e.preventDefault();let t=[];if("touchmove"===e.type){let n=[...d];n[_]={transform:"translateY("+Math.floor(e.touches[0].clientY-u[_].top)+"px)"},p(n),t.push(a[_]);let i=[];if(e.touches[0].clientY&&u.map((n,r)=>{n.top+n.height/2>e.touches[0].clientY&&a[r]!==a[_]&&t.push(a[r]),n.bottom-n.height/2<e.touches[0].clientY&&a[r]!==a[_]&&i.push(a[r])}),i.length)for(let e=i.length-1;e>=0;e--)t.unshift(i[e]);l(t)}},onTouchEnd:t=>{s(o),e.update(o,"changed"),c([]),p([]),r(!1),l([])},className:h(_)+" "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(_)?"question_correct":"question_incorrect":"")},ct("div",{dangerouslySetInnerHTML:{__html:m}}))))};const{createElement:ft,render:vt,useState:gt,useEffect:wt,Fragment:yt}=wp.element;var xt=e=>{e.question.id,e.quiz_id;const[t,n]=gt({}),[i,r]=gt(!1);wt(()=>{let t=e.question;if(!i&&t&&t.marked_answer&&t.marked_answer.length&&"undefined"!=t.marked_answer){let e=[];t.marked_answer.map((n,i)=>{e.push(t.original_options[parseInt(n)-1])}),t.options=e,n(t),r(!0)}n(t)},[t]);return ft(yt,null,ft("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?ft(yt,null,ft(_t,{items:t.options,original_items:t.original_options,update:(i,r)=>{if("changed"==r){let r=t;r.marked_answer=[],i.map((e,t)=>{let n=r.original_options.indexOf(e);r.marked_answer.push(n+1)}),n(r),e.update(r,e.index,"changed")}},question:t}),t.attempted?"":ft("span",{className:"resetq_answer button",onClick:i=>{let r={...t};r.marked_answer=null,r.options=r.original_options,n(r),e.update(r,e.index,"changed")}},ft("i",{class:"vicon vicon-trash"}))):"")};const{createElement:bt,render:kt,useState:Et,useEffect:qt,Fragment:St}=wp.element;function Nt(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var Ct=e=>{const[t,n]=Et([]),[i,r]=Et(!1),[a,s]=Et([]),[o,l]=Et(""),[u,c]=Et([]),[d,p]=Et(e.matches),[m,h]=Et([]),[_,f]=Et([]),[v,g]=Et([]),[w,y]=Et({}),[x,b]=Et([]),[k,E]=Et([]),[q,S]=Et([]),[N,C]=Et({x:0,y:0}),[M,O]=Et([]);qt(()=>{let t=[...e.items];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(n=>{n&&"NaN"!=typeof n&&(t=t.filter(t=>t!=e.question.original_options[n-1]))}),c(t);let n=[];e.question&&e.question.marked_answer&&e.question.marked_answer.length&&e.question.marked_answer.map(e=>{parseFloat(e)-1>=0?n.push(e-1):n.push(null)}),S(n),e.update(!1,"reset")},[e.items,e.reset]);let z="droppable";i&&(z+=" active");const I=e=>{let t="";return i===u[e]&&(t="dragging"),t};return bt("div",{className:"match_playground"},bt("div",{className:"match_options"},d&&d.length?d.map((n,l)=>bt("div",{key:l,className:"match_option "+(e.question.show_correct_answer&&e.question.correct_indexes?e.question.correct_indexes&&e.question.correct_indexes.length&&e.question.correct_indexes.includes(l)?"question_correct":"question_incorrect":""),onDrop:t=>{((t,n)=>{if(!i)return;if(M.index===n)return;let r=[...u],a=[...q];if(!a[n]&&0!==a[n]){r=r.filter(e=>e!=i);let t=e.original_items.indexOf(i);d&&d.length&&d.map((e,t)=>{Nt(a[t])&&(a[t]=null)}),Nt(n)||(a[n]=t),S(a),c(r),e.update(a,"changed")}})(0,l)},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,t)=>{if(e){let n=a;n[t]||(n[t]=e),s(n)}})(e,l)}},bt("div",{dangerouslySetInnerHTML:{__html:n}}),bt("div",{className:"children"},e.original_items&&null!=q[l]&&e.original_items[q[l]]?bt("div",{key:"droppablediv"+l,draggable:"true",onDragStart:t=>{e.original_items[q[l]]&&(r(e.original_items[q[l]]),O({index:l,source:"droppablediv"}))},onDragEnd:()=>{r(!1),O({})},onDragOver:e=>{e.preventDefault()},className:I(l),style:k[q[l]],onTouchStart:n=>{let i=[..._];t.map((e,t)=>{let n=e.getBoundingClientRect();i[t]=n}),f(i);let s=[...v];a.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),g(s),y(o.getBoundingClientRect()),e.original_items[q[l]]&&(r(e.original_items[q[l]]),O({index:l,source:"droppablediv"})),O({})},onTouchMove:e=>{if(e&&(e.preventDefault(),"touchmove"===e.type)){let t=[...k];t[q[l]]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},E(t),C({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{let n=[...u],a=[...q];w.top<N.y&&w.top+w.height>N.y&&w.left<N.x&&w.left+w.width>N.x&&(n.push(i),a.map((e,t)=>{e==q[l]&&(a[t]=null)})),g([]),y({}),r(!1),E([]),b([]),c(n),S(a),e.update(a,"changed"),C({x:0,y:0})}},bt("div",{dangerouslySetInnerHTML:{__html:e.original_items[q[l]]}})):""))):""),bt("div",{className:z,onDragOver:e=>{e.preventDefault()},onDrop:t=>{(t=>{if("droppablediv"!==M.source)return;if(!i)return;let n=[...u],r=[...q];n.includes(i)||n.push(i),c(n),Nt(M.index)||(r[M.index]=null),S(r),e.update(r,"changed")})()},ref:e=>{var t;(t=e)&&l(t)}},u&&u.length?u.map((i,s)=>bt("div",{key:"draggablediv"+s,onDragStart:e=>{u[s]&&r(u[s]),O({})},onDragEnd:()=>{r(!1),O({})},onDragOver:e=>{e.preventDefault()},ref:e=>{((e,i)=>{if(e){let r=t;r[i]||(r[i]=e),n(r)}})(e,s)},draggable:"true",style:x[s],onTouchStart:e=>{let n=[..._];t.map((e,t)=>{let i=e.getBoundingClientRect();n[t]=i}),f(n);let s=[...v];a.map((e,t)=>{let n=e.getBoundingClientRect();s[t]=n}),g(s),i&&r(i),O({})},onTouchMove:e=>{if(e.preventDefault(),"touchmove"===e.type){let t=[...x];t[s]={position:"fixed",top:Math.floor(e.touches[0].clientY)+"px",left:Math.floor(e.touches[0].clientX)+"px"},b(t),C({x:e.touches[0].clientX,y:e.touches[0].clientY})}},onTouchEnd:t=>{b([]);let n=[...u],a=[...q];v.map((t,r)=>{if(t.top<N.y&&t.top+t.height>N.y&&t.left<N.x&&t.left+t.width>N.x){let t=e.original_items.indexOf(i);t>=0&&!a[r]&&0!==a[r]&&(a[r]=t,n=n.filter(e=>e!=i))}}),g([]),r(!1),c(n),S(a),e.update(a,"changed"),C({x:0,y:0})},className:I(s)},bt("div",{dangerouslySetInnerHTML:{__html:i}}))):""))};const{createElement:Mt,render:Ot,useState:zt,useEffect:It,Fragment:Pt}=wp.element;var Bt=e=>{e.question.id,e.quiz_id;const[t,n]=zt({}),[i,r]=zt(!1);It(()=>{n(e.question)},[t]);return Mt(Pt,null,Mt("div",{className:"question_content"},Mt("div",{className:"question_statement",dangerouslySetInnerHTML:{__html:t&&t.extra_content&&t.extra_content.statement?t.extra_content.statement:""}}),t.options&&t.options.length&&t.content.match&&t.content.match.length?Mt(Ct,{matches:t.extra_content.match,original_matches:t.extra_content.match,items:t.options,original_items:t.original_options,update:(i,a)=>{if("changed"==a){let r={...t};r.marked_answer=[],i.map(e=>{r.marked_answer.push(parseInt(e)+1)}),n(r),e.update(r,e.index,"changed")}"reset"==a&&r(!1)},reset:i,question:t}):"",Mt("div",{className:"question_end",dangerouslySetInnerHTML:{__html:t&&t.content&&t.content.end?t.content.end:""}})),t.attempted?"":Mt("span",{className:"resetq_answer button",onClick:i=>{r(!0);let a={...t};a.marked_answer=null,a.options=a.original_options,n(a),e.update(a,e.index,"changed")}},Mt("i",{class:"vicon vicon-trash"})))};const{createElement:Tt,render:At,useState:Lt,useEffect:Ht,Fragment:Rt}=wp.element;var Dt=e=>{const[t,n]=Lt(e.question);let i="";return t.hasOwnProperty("marked_answer")&&(i=t.marked_answer),Tt(Rt,null,Tt("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),t.options&&t.options.length?Tt(Rt,null,(t=>t.options.map((function(i,r){return Tt("div",{className:"question_option radio "+(t.show_correct_answer&&t.correct_indexes?t.correct_indexes&&t.correct_indexes.length&&t.correct_indexes.includes(r)?"question_correct":"question_incorrect":"")},Tt("input",{type:"radio",name:e.quiz_id+"_"+t.id,value:r,id:e.quiz_id+"_"+t.id+r,checked:parseInt(t.marked_answer)===r,onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")}}),Tt("label",{for:e.quiz_id+"_"+t.id+r,dangerouslySetInnerHTML:{__html:i}}))})))(t),t.attempted?"":Tt("span",{className:"resetq_answer button",onClick:t=>{let i={...e.question};i.marked_answer=null,n(i)}},Tt("i",{class:"vicon vicon-trash"}))):"")};const{createElement:Ft,render:jt,useState:Xt,useEffect:Yt,Fragment:Ut}=wp.element;var Wt,Vt,Jt=e=>{const[t,n]=Xt({});Yt(()=>{n(e.question)},[e.question]);let i="";t.hasOwnProperty("marked_answer")&&(i=t.marked_answer);let r="";return t.hasOwnProperty("usercorrect")&&t.show_correct_answer&&(r="question_incorrect",t.usercorrect>0&&(r="question_correct")),Ft(Ut,null,Ft("div",{className:"question_content",dangerouslySetInnerHTML:{__html:t&&t.content?t.content:""}}),Ft("textarea",{className:r,type:"text",onChange:t=>{let i={...e.question};i.marked_answer=t.target.value,n(i),e.update(i,e.index,"changed")},value:i},i))},$t=$t||function(e,t){var n={},i=n.lib={},r=function(){},a=i.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var r=0;r<e;r++)t[i+r>>>2]|=(n[r>>>2]>>>24-r%4*8&255)<<24-(i+r)%4*8;else if(65535<n.length)for(r=0;r<e;r+=4)t[i+r>>>2]=n[r>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;i<t;i+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),o=n.enc={},l=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++){var r=t[i>>>2]>>>24-i%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(n,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],i=0;i<e;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(n,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,r=n.sigBytes,a=this.blockSize,o=r/(4*a);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,r=e.min(4*t,r),t){for(var l=0;l<t;l+=a)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=r}return new s.init(l,r)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}});var p=n.algo={};return n}(Math);Vt=(Wt=$t).lib.WordArray,Wt.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,i=this._map;e.clamp(),e=[];for(var r=0;r<n;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;4>s&&r+.75*s<n;s++)e.push(i.charAt(a>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,n=this._map;(i=n.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],r=0,a=0;a<t;a++)if(a%4){var s=n.indexOf(e.charAt(a-1))<<a%4*2,o=n.indexOf(e.charAt(a))>>>6-a%4*2;i[r>>>2]|=(s|o)<<24-r%4*8,r++}return Vt.create(i,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,n,i,r,a,s){return((e=e+(t&n|~t&i)+r+s)<<a|e>>>32-a)+t}function n(e,t,n,i,r,a,s){return((e=e+(t&i|n&~i)+r+s)<<a|e>>>32-a)+t}function i(e,t,n,i,r,a,s){return((e=e+(t^n^i)+r+s)<<a|e>>>32-a)+t}function r(e,t,n,i,r,a,s){return((e=e+(n^(t|~i))+r+s)<<a|e>>>32-a)+t}for(var a=$t,s=(l=a.lib).WordArray,o=l.Hasher,l=a.algo,u=[],c=0;64>c;c++)u[c]=4294967296*e.abs(e.sin(c+1))|0;l=l.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var s=0;16>s;s++){var o=e[l=a+s];e[l]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}s=this._hash.words;var l=e[a+0],c=(o=e[a+1],e[a+2]),d=e[a+3],p=e[a+4],m=e[a+5],h=e[a+6],_=e[a+7],f=e[a+8],v=e[a+9],g=e[a+10],w=e[a+11],y=e[a+12],x=e[a+13],b=e[a+14],k=e[a+15],E=t(E=s[0],N=s[1],S=s[2],q=s[3],l,7,u[0]),q=t(q,E,N,S,o,12,u[1]),S=t(S,q,E,N,c,17,u[2]),N=t(N,S,q,E,d,22,u[3]);E=t(E,N,S,q,p,7,u[4]),q=t(q,E,N,S,m,12,u[5]),S=t(S,q,E,N,h,17,u[6]),N=t(N,S,q,E,_,22,u[7]),E=t(E,N,S,q,f,7,u[8]),q=t(q,E,N,S,v,12,u[9]),S=t(S,q,E,N,g,17,u[10]),N=t(N,S,q,E,w,22,u[11]),E=t(E,N,S,q,y,7,u[12]),q=t(q,E,N,S,x,12,u[13]),S=t(S,q,E,N,b,17,u[14]),E=n(E,N=t(N,S,q,E,k,22,u[15]),S,q,o,5,u[16]),q=n(q,E,N,S,h,9,u[17]),S=n(S,q,E,N,w,14,u[18]),N=n(N,S,q,E,l,20,u[19]),E=n(E,N,S,q,m,5,u[20]),q=n(q,E,N,S,g,9,u[21]),S=n(S,q,E,N,k,14,u[22]),N=n(N,S,q,E,p,20,u[23]),E=n(E,N,S,q,v,5,u[24]),q=n(q,E,N,S,b,9,u[25]),S=n(S,q,E,N,d,14,u[26]),N=n(N,S,q,E,f,20,u[27]),E=n(E,N,S,q,x,5,u[28]),q=n(q,E,N,S,c,9,u[29]),S=n(S,q,E,N,_,14,u[30]),E=i(E,N=n(N,S,q,E,y,20,u[31]),S,q,m,4,u[32]),q=i(q,E,N,S,f,11,u[33]),S=i(S,q,E,N,w,16,u[34]),N=i(N,S,q,E,b,23,u[35]),E=i(E,N,S,q,o,4,u[36]),q=i(q,E,N,S,p,11,u[37]),S=i(S,q,E,N,_,16,u[38]),N=i(N,S,q,E,g,23,u[39]),E=i(E,N,S,q,x,4,u[40]),q=i(q,E,N,S,l,11,u[41]),S=i(S,q,E,N,d,16,u[42]),N=i(N,S,q,E,h,23,u[43]),E=i(E,N,S,q,v,4,u[44]),q=i(q,E,N,S,y,11,u[45]),S=i(S,q,E,N,k,16,u[46]),E=r(E,N=i(N,S,q,E,c,23,u[47]),S,q,l,6,u[48]),q=r(q,E,N,S,_,10,u[49]),S=r(S,q,E,N,b,15,u[50]),N=r(N,S,q,E,m,21,u[51]),E=r(E,N,S,q,y,6,u[52]),q=r(q,E,N,S,d,10,u[53]),S=r(S,q,E,N,g,15,u[54]),N=r(N,S,q,E,o,21,u[55]),E=r(E,N,S,q,f,6,u[56]),q=r(q,E,N,S,k,10,u[57]),S=r(S,q,E,N,h,15,u[58]),N=r(N,S,q,E,x,21,u[59]),E=r(E,N,S,q,p,6,u[60]),q=r(q,E,N,S,w,10,u[61]),S=r(S,q,E,N,c,15,u[62]),N=r(N,S,q,E,v,21,u[63]);s[0]=s[0]+E|0,s[1]=s[1]+N|0,s[2]=s[2]+S|0,s[3]=s[3]+q|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var a=e.floor(i/4294967296);for(n[15+(r+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(r+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,i=0;4>i;i++)r=n[i],n[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=o._createHelper(l),a.HmacMD5=o._createHmacHelper(l)}(Math),function(){var e,t=$t,n=(e=t.lib).Base,i=e.WordArray,r=(e=t.algo).EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(o=this.cfg).hasher.create(),r=i.create(),a=r.words,s=o.keySize,o=o.iterations;a.length<s;){l&&n.update(l);var l=n.update(e).finalize(t);n.reset();for(var u=1;u<o;u++)l=n.finalize(l),n.reset();r.concat(l)}return r.sigBytes=4*s,r}});t.EvpKDF=function(e,t,n){return r.create(n).compute(e,t)}}(),$t.lib.Cipher||function(e){var t=(m=$t).lib,n=t.Base,i=t.WordArray,r=t.BufferedBlockAlgorithm,a=m.enc.Base64,s=m.algo.EvpKDF,o=t.Cipher=r.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,i){return("string"==typeof n?h:p).encrypt(e,t,n,i)},decrypt:function(t,n,i){return("string"==typeof n?h:p).decrypt(e,t,n,i)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var l=m.mode={},u=function(e,t,n){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var r=0;r<n;r++)e[t+r]^=i[r]},c=(t.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize;u.call(this,e,t,i),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),c.Decryptor=c.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,r=e.slice(t,t+i);n.decryptBlock(e,t),u.call(this,e,t,i),this._prevBlock=r}}),l=l.CBC=c,c=(m.pad={}).Pkcs7={pad:function(e,t){for(var n,r=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,a=[],s=0;s<n;s+=4)a.push(r);n=i.create(a,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:l,padding:c}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var d=t.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(l=(m.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return d.create({ciphertext:e,salt:n})}},t.SerializableCipher=n.extend({cfg:n.extend({format:l}),encrypt:function(e,t,n,i){i=this.cfg.extend(i);var r=e.createEncryptor(n,i);return t=r.finalize(t),r=r.cfg,d.create({ciphertext:t,key:n,iv:r.iv,algorithm:e,mode:r.mode,padding:r.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(n,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),m=(m.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=i.random(8)),e=s.create({keySize:t+n}).compute(e,r),n=i.create(e.words.slice(t),4*n),e.sigBytes=4*t,d.create({key:e,iv:n,salt:r})}},h=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:m}),encrypt:function(e,t,n,i){return n=(i=this.cfg.extend(i)).kdf.execute(n,e.keySize,e.ivSize),i.iv=n.iv,(e=p.encrypt.call(this,e,t,n.key,i)).mixIn(n),e},decrypt:function(e,t,n,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),n=i.kdf.execute(n,e.keySize,e.ivSize,t.salt),i.iv=n.iv,p.decrypt.call(this,e,t,n.key,i)}})}(),function(){for(var e=$t,t=e.lib.BlockCipher,n=e.algo,i=[],r=[],a=[],s=[],o=[],l=[],u=[],c=[],d=[],p=[],m=[],h=0;256>h;h++)m[h]=128>h?h<<1:h<<1^283;var _=0,f=0;for(h=0;256>h;h++){var v=(v=f^f<<1^f<<2^f<<3^f<<4)>>>8^255&v^99;i[_]=v,r[v]=_;var g=m[_],w=m[g],y=m[w],x=257*m[v]^16843008*v;a[_]=x<<24|x>>>8,s[_]=x<<16|x>>>16,o[_]=x<<8|x>>>24,l[_]=x,x=16843009*y^65537*w^257*g^16843008*_,u[v]=x<<24|x>>>8,c[v]=x<<16|x>>>16,d[v]=x<<8|x>>>24,p[v]=x,_?(_=g^m[m[m[y^g]]],f^=m[m[f]]):_=f=1}var b=[0,1,2,4,8,16,32,64,128,27,54];n=n.AES=t.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],a=0;a<n;a++)if(a<t)r[a]=e[a];else{var s=r[a-1];a%t?6<t&&4==a%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=b[a/t|0]<<24),r[a]=r[a-t]^s}for(e=this._invKeySchedule=[],t=0;t<n;t++)a=n-t,s=t%4?r[a]:r[a-4],e[t]=4>t||4>=a?s:u[i[s>>>24]]^c[i[s>>>16&255]]^d[i[s>>>8&255]]^p[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,s,o,l,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,c,d,p,r),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,i,r,a,s,o){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],d=e[t+2]^n[2],p=e[t+3]^n[3],m=4,h=1;h<l;h++){var _=i[u>>>24]^r[c>>>16&255]^a[d>>>8&255]^s[255&p]^n[m++],f=i[c>>>24]^r[d>>>16&255]^a[p>>>8&255]^s[255&u]^n[m++],v=i[d>>>24]^r[p>>>16&255]^a[u>>>8&255]^s[255&c]^n[m++];p=i[p>>>24]^r[u>>>16&255]^a[c>>>8&255]^s[255&d]^n[m++],u=_,c=f,d=v}_=(o[u>>>24]<<24|o[c>>>16&255]<<16|o[d>>>8&255]<<8|o[255&p])^n[m++],f=(o[c>>>24]<<24|o[d>>>16&255]<<16|o[p>>>8&255]<<8|o[255&u])^n[m++],v=(o[d>>>24]<<24|o[p>>>16&255]<<16|o[u>>>8&255]<<8|o[255&c])^n[m++],p=(o[p>>>24]<<24|o[u>>>16&255]<<16|o[c>>>8&255]<<8|o[255&d])^n[m++],e[t]=_,e[t+1]=f,e[t+2]=v,e[t+3]=p},keySize:8});e.AES=t._createHelper(n)}();var Kt=$t,Gt={stringify:function(e){var t={ct:e.ciphertext.toString(Kt.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t).replace(/\s/g,"")},parse:function(e){var t=JSON.parse(e),n=Kt.lib.CipherParams.create({ciphertext:Kt.enc.Base64.parse(t.ct)});return t.iv&&(n.iv=Kt.enc.Hex.parse(t.iv)),t.s&&(n.salt=Kt.enc.Hex.parse(t.s)),n}};var Qt=e=>{let t="";if(!e.type)return t;if(!e.marked||"undefined"==e.marked)return t;switch(e.type){case"truefalse":case"single":case"survey":t=e.options[parseInt(e.marked)];break;case"multiple":if(t="",(n=e.marked.split(",")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])]+(i+1<n.length?" , ":"");break;case"sort":case"match":if((n=e.marked.split(",")).length)for(let i=0;i<n.length;i++)"undefined"!==e.original_options[parseInt(n[i])-1]&&null!=e.original_options[parseInt(n[i])-1]&&""!=e.original_options[parseInt(n[i])-1]||(e.original_options[parseInt(n[i])-1]="____"),t+=e.original_options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"select":if(t="",(n=e.marked.split("|")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])]+(i+1<n.length?" , ":"");break;case"fillblank":case"text":var n;if(t="",(n=e.marked.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"");break;case"largetext":case"smalltext":t=e.marked}return t};var Zt=e=>{let t="";if(!e.type)return"";switch(e.type){case"truefalse":t=e.correct?window.wplms_course_data.translations.true:window.wplms_course_data.translations.false;break;case"single":case"survey":t=e.options[parseInt(e.correct)-1];break;case"multiple":if(t="",(n=e.correct.split(",")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"sort":case"match":if(t="",(n=e.correct.split(",")).length)for(let i=0;i<n.length;i++)t+=e.original_options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"select":if(t="",(n=e.correct.split("|")).length)for(let i=0;i<n.length;i++)t+=e.options[parseInt(n[i])-1]+(i+1<n.length?" , ":"");break;case"fillblank":case"text":case"largetext":case"smalltext":var n;if(t="",(n=e.correct.split("|")).length)for(let e=0;e<n.length;e++)t+=n[e]+(e+1<n.length?" , ":"")}return t};function en(e){if(null==e)return!0;if(void 0===e)return!0;if("number"==typeof e)return!1;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var tn=(e,t=null,n=null,i=null,r=!0)=>{i&&(i=parseFloat(i)),n||(i=null);let a=0,s=[],o=0;e.user_marks=0;let l=0,u=null;en(e.correct)||(u=JSON.parse(Kt.AES.decrypt(e.correct,e.key,{format:Gt}).toString(Kt.enc.Utf8))),e.correct=u,e.marked_answer&&"undefined"!=e.marked_answer||(e.marked_answer=null);let c=e.marked_answer;switch(e.type){case"truefalse":e.marked=c,e.correct=parseInt(u),c==u?(e.user_marks=e.marks,a=1):e.user_marks=0,s.push(u);break;case"single":e.marked=c,c==u-1?(e.user_marks=e.marks,a=1):e.user_marks=0,s.push(u-1);break;case"multiple":en(c)&&(c=[]);var d=c;e.marked=c.join(",").slice();var p=u.split(",");if(s=p,t){if(d.length)for(let e=0;e<d.length;e++){let t=d[e]+1;t=t.toString(),-1!==p.indexOf(t)?o++:l++}a=o/p.length,e.user_marks=Math.round(e.marks*a*100)/100}else if(d.length==p.length)for(let t=0;t<d.length;t++){e.user_marks=e.marks,a=1;let n=d[t]+1;if(n=n.toString(),-1==p.indexOf(n)){e.user_marks=0,a=0;break}}break;case"match":case"sort":en(c)&&(c=[]),e.marked=c.join(",").slice();let n=c,i=u.split(","),r=0;if(n&&n.length){for(let t=0;t<n.length;t++){e.user_marks=e.marks,a=1;let u="";en(n[t])||(u=n[t].toString()),i[t]!=u?(a&&(e.user_marks=0,a=0,r=1),l++):(o++,s.push(t))}t?(a=o/i.length,e.user_marks=Math.round(e.marks*a*100)/100):r&&(e.user_marks=0,a=0)}break;case"fillblank":en(c)&&(c=[]),c.map((e,t)=>{c[t]=e.toLowerCase()}),e.marked=c.join("|").slice(),u=u.toLowerCase();let m=u.split("|");if(e.user_marks=0,c.length){e.user_marks=e.marks,a=1;for(let t=0;t<c.length;t++){let n="";en(c[t])||(n=c[t].toString());let i=[];en(m[t])||Array.isArray(m[t])||(i=m[t].split(",")),-1==i.indexOf(n)?(a&&(e.user_marks=0,a=0),l++):(o++,s.push(t))}t?(a=o/m.length,e.user_marks=Math.round(e.marks*a*100)/100):c.length!==m.length&&(e.user_marks=0,a=0)}break;case"select":en(c)&&(c=[]),e.marked=c.join("|").slice();let h=u.split("|");if(e.user_marks=0,c&&c.length){e.user_marks=e.marks,a=1;for(let t=0;t<c.length;t++){let n="";n=(parseInt(c[t])+1).toString(),n!=h[t]?(a&&(e.user_marks=0,a=0),l++):(o++,s.push(t))}t?(a=o/h.length,e.user_marks=Math.round(e.marks*a*100)/100):c.length!==h.length&&(e.user_marks=0,a=0)}break;case"smalltext":case"largetext":e.marked=c,c&&u&&c.toLowerCase()==u.toLowerCase()?(e.user_marks=e.marks,a=1):e.user_marks=0}if(!en(c)&&i&&(t&&l>0?e.user_marks=e.user_marks-l*i:a||(e.user_marks=e.user_marks-i)),e.auto||r||(e.user_marks=0,e.show_correct_answer=0),s&&s.length)for(var m=s.length-1;m>=0;m--)"multiple"==e.type?s[m]=parseInt(s[m]-1):s[m]=parseInt(s[m]);return e.correct_indexes=s,e.auto&&(e.usercorrect=a,e.attempted=!0),e.marked=Qt(e),e.correct=Zt(e),e};const{createElement:nn,render:rn,useState:an,useEffect:sn,Fragment:on,RawHTML:ln}=wp.element;var un=e=>{const[t,n]=an({}),[i,r]=an(!1);sn(()=>{n(e.question),setTimeout(()=>{r(!0)},200)},[]);let a="incorrect",s="checked_answer incorrect";return t.hasOwnProperty("user_marks")&&t.user_marks&&parseFloat(t.user_marks)>0&&(a="correct",s="checked_answer correct"),nn(on,null,t.show_correct_answer?nn("div",{className:s},nn("strong",null,window.wplms_course_data.translations.correct_answer,nn(ln,null,t.correct))):"",nn("div",{className:i?"question_wrapper loaded":"question_wrapper"},nn("div",{className:"result"},nn("div",{className:a},nn("span",null),nn("strong",null,t.user_marks)))))};const{createElement:cn,render:dn,useState:pn,useEffect:mn,Fragment:hn}=wp.element;var _n=e=>{let t="",n="";return mn(()=>{},[e.question]),e.question.hasOwnProperty("show_hint")&&e.question.show_hint?(n="question_hint_content message show",t="question_hint show"):(e.question.show_hint=0,n="question_hint_content message",t="question_hint"),cn(hn,null,e.question.hint?cn("span",{className:t,onClick:t=>{e.question.show_hint=!e.question.show_hint,e.update({...e.question},e.index,"changed")}}):"",e.question.hint?cn("span",{className:n,dangerouslySetInnerHTML:{__html:e.question.hint}}):"")};const{createElement:fn,render:vn,useState:gn,useEffect:wn,Fragment:yn}=wp.element,{dispatch:xn,select:bn}=wp.data;var kn=e=>{const[t,n]=gn({}),[i,r]=gn(!1),[s,o]=gn(null);wn(()=>{n(e.question),r(!0)},[e.question]);const l=(e,i=0,r)=>{let a={...t};"changed"==r&&(a=e,n(a),!function(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.marked_answer)?"object"==typeof e.marked_answer||Array.isArray(e.marked_answer)?localStorage.setItem(e.id,JSON.stringify(e.marked_answer)):localStorage.setItem(e.id,e.marked_answer):null==e.marked_answer&&localStorage.removeItem(e.id))};return i?t?fn(yn,null,fn("div",{className:"incourse"},fn("div",{className:"quiz_questions_content"},fn("div",{className:"question_cwrapper"},fn("div",{className:"question","data-i":e.i},fn(_n,{question:t,update:l}),(e=>{switch(e.type){case"smalltext":return fn(Pe,{question:e,update:l});case"single":return fn(Re,{question:e,update:l,quiz_id:e.id});case"select":return fn(Ue,{question:e,update:l,quiz_id:e.id});case"multiple":return fn(Ge,{question:e,update:l,quiz_id:e.id});case"fillblank":return fn(ut,{question:e,update:l,quiz_id:e.id});case"sort":return fn(xt,{question:e,update:l,quiz_id:e.id});case"match":return fn(Bt,{question:e,update:l,quiz_id:e.id});case"truefalse":return fn(Dt,{question:e,update:l,quiz_id:e.id});case"largetext":return fn(Jt,{question:e,update:l,quiz_id:e.id})}})({...t}),t.attempted?"":fn("div",{className:"quiz_check_answer button",onClick:e=>{(e=>{let t={...e};r(!1),t=tn(t,null,null,null,!0),t.attempted=!0,r(!0),n(t)})(t)}},window.wplms_course_data.translations.check_answer),t.attempted?fn(un,{question:t}):"",t.attempted&&t.explanation.length?fn("div",{className:"explanation"},fn("strong",null,window.wplms_course_data.translations.question_explanation),fn("div",{dangerouslySetInnerHTML:{__html:t.explanation}})):"")),t.attempted&&window.wplms_course_data.question_retries?fn("div",{className:"quiz_check_answer button",onClick:e=>{(()=>{let e={...t};if(e.hasOwnProperty("original")){let t=e;e=t.original,e.original=t.original,n(e)}})()}},fn("span",{className:"vicon vicon-reload"}),window.wplms_course_data.translations.retry):""))):"":fn(a,null)};const{createElement:En,render:qn,useState:Sn,useEffect:Nn,Fragment:Cn}=wp.element,{dispatch:Mn,select:On}=wp.data;function zn(e){if(null==e)return!0;if("number"==typeof e)return!0;if(Array.isArray(e)||"string"==typeof e||e instanceof String)return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}var In=e=>{const[t,n]=Sn([]),[i,r]=Sn(!1),[s,o]=Sn(0);Nn(()=>{l()},[e.questions,s]);const l=()=>{r(!1),fetch(`${window.wplms_course_data.api_url}/course/questions/?client_id=${window.wplms_course_data.client_id}`,{method:"post",body:JSON.stringify({questions:e.questions,page:s+1,per_page:window.wplms_course_data.practice_questions})}).then(e=>e.json()).then(e=>{if(e.status){if(e.questions){let t=[];e.questions.map(e=>{let n=localStorage.getItem(e.id);!zn(n)&&zn(e.marked_answer)&&(!function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(n)?e.marked_answer=n:e.marked_answer=JSON.parse(n)),t.push(e)}),n(t)}r(!0)}else console.log(e)})};return En("div",{className:"practice_questions"},i?t.filter((e,t)=>t<(s+1)*window.wplms_course_data.practice_questions).map(e=>En(kn,{question:e,i:s*window.wplms_course_data.practice_questions+t.indexOf(e)+1})):En(a,null),e.questions.length>window.wplms_course_data.practice_questions?En("div",{className:"buttons has-addons"},s>0?En("span",{className:"button vicon vicon-angle-left",onClick:()=>{i&&o(s-1)}}):"",s<Math.floor(e.questions.length/window.wplms_course_data.practice_questions)?En("span",{className:"button vicon vicon-angle-right",onClick:()=>{i&&o(s+1)}}):""):"")};const{createElement:Pn,render:Bn,useState:Tn,useEffect:An,Fragment:Ln,useContext:Hn}=wp.element,{dispatch:Rn,select:Dn}=wp.data;var Fn=e=>{const[t,n]=Tn(null),[i,r]=Tn(e.curriculumItem),[a,s]=Tn(!1),[o,l]=Tn(!1),[u,c]=Tn(!1);Hn(X);An(()=>{r(e.curriculumItem)},[e.curriculumItem]);let d="";if(i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video&&"video"==i.meta.video.type){let e=i.meta.video.url.split(".");switch(e[e.length-1]){case"mov":d="video/mp4";break;default:d="video/"+e[e.length-1]}}if(i.meta.hasOwnProperty("audio")&&"object"==typeof i.meta.audio&&"audio"==i.meta.audio.type){let e=i.meta.audio.url.split(".");switch(e[e.length-1]){case"m4a":d="audio/mp4";break;case"oga":d="audio/ogg";break;default:d="audio/"+e[e.length-1]}}const m=(t,n,r=null)=>{let o={};window.wplms_course_data.course.status.seek_lock&&(o.listeners={seek:e=>{var t=a.currentTime;if(((e,t)=>"object"!=typeof t||"input"!==t.type&&"change"!==t.type?Number(t):t.target.value/t.target.max*e.media.duration)(a,e)>t)return e.preventDefault(),!1}});let l=new Plyr(t,o);l.once("loadeddata",()=>{let e=localStorage.getItem(n);e&&e<=l.duration&&(l.currentTime=e),s({plyr:l,url:n})}),null===r||i.status||l.once("ended",t=>{e.update({index:r,src:n,event:t},"videosended")})};((e,t,n=[])=>{const i=_e(Date.now());pe(()=>{const n=setTimeout((function(){Date.now()-i.current>=t&&(e(),i.current=Date.now())}),t-(Date.now()-i.current));return()=>{clearTimeout(n)}},[t,...n])})(()=>{void 0!==a.player&&a.player.on("playing",()=>{localStorage.setItem(a.url,a.player.currentTime)})},500,[a,o]);const h=(e,t)=>{let n={...i};n.meta.hasOwnProperty("assignments")&&n.meta.assignments.length&&n.meta.assignments[t]&&(n.meta.assignments[t].show=e),r(n)},_=(t,n)=>{"complete"==n&&e.update({assignmentIndex:t.assignmentIndex},"completeUnitAssigmnent"),"retake"==n&&e.update({assignmentIndex:t.assignmentIndex},"retakeUnitAssigmnent")};window.scorm_page_type="unit",window.hasOwnProperty("scorm_wplms_data")||(window.scorm_wplms_data={}),window.scorm_wplms_data.module_id=i.id,window.scorm_wplms_data.type="unit";let f=[],v=[];if(i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video){if("youtube"==i.meta.video.type){let e=i.meta.video.url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&|?]+)/);e&&e.length&&(f=e[1])}"vimeo"==i.meta.video.type&&(v=i.meta.video.url.match(/(http|https)?:\/\/(www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|)(\d+)(?:|\/\?)/))}return Pn("div",{className:"course_content_content"},e.hasOwnProperty("noLabels")&&e.noLabels?"":Pn(Ln,null,Pn("span",{className:"lesson_info"},Pn("span",null,window.wplms_course_data.reports.module.unit+" ",e.item_number+"/"+e.total_item_count),Pn("span",null," "),Pn(ue,{timestamp:i.duration,notimediff:1})),Pn("h2",{dangerouslySetInnerHTML:{__html:i.title}})),Pn("div",null,i.meta.hasOwnProperty("access")&&i.meta.access||!i.meta.hasOwnProperty("drip_time")?i.meta.hasOwnProperty("video")&&"object"==typeof i.meta.video&&!Array.isArray(i.meta.video)?"youtube"==i.meta.video.type?Pn("div",null,f&&f.length?Pn(Ne,{provider:"youtube",index:e.index,embed_id:f,url:i.meta.video.url,update:(t,n)=>{e.update(n,"mediaended")}}):""):"vimeo"==i.meta.video.type?Pn("div",null,Pn(Ne,{provider:"vimeo",index:e.index,embed_id:v[4],url:i.meta.video.url})):Pn("div",null,Pn(Ne,{provider:"local",index:e.index,src:i.meta.video.url,mime_type:d,url:i.meta.video.url})):i.meta.hasOwnProperty("audio")&&"object"==typeof i.meta.audio&&!Array.isArray(i.meta.audio)&&i.meta.audio.url.length?Pn("audio",{className:"activity_meta video",ref:e=>{m(e,i.meta.audio.url)}},Pn("source",{src:i.meta.audio.url,type:d})):i.meta.hasOwnProperty("package")?Pn("div",{className:"unit_iframe_wrapper"},Pn("iframe",{src:i.meta.package.src,width:"100%",height:"100%",frameborder:"0",allowfullscreen:"allowfullscreen"})):Pn("div",{className:i.type+""+i.id}):Pn(p,{start:!0,duration:i.meta.drip_time,update:(t,n)=>{"expired"==n&&e.update({index:e.index},"loadunit")},quiz_id:e.index})),i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("video")&&i.meta.video.length?Pn("div",{className:"unit_videos"},i.meta.video.map((e,t)=>Pn("div",{className:"video_wrapper"},Pn("video",{className:"activity_meta video",ref:n=>m(n,e,t)},Pn("source",{src:e,type:"video/mp4"}))))):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("audio")&&i.meta.audio.length?Pn("div",{className:"unit_videos"},i.meta.audio.map((e,t)=>Pn("div",{className:"video_wrapper"},Pn("audio",{className:"activity_meta video",ref:t=>m(t,e)},Pn("source",{src:e,type:"audio/mpeg"}))))):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.hasOwnProperty("iframes")&&i.meta.iframes.length?Pn("div",{className:"unit_iframes"},i.meta.iframes.map((e,t)=>"object"==typeof e&&e.hasOwnProperty("value")?Pn("div",{className:"unit_iframe_wrapper "+e.shortcode},Pn("iframe",{src:e.value,width:"560",height:"315",frameborder:"0",allowfullscreen:"allowfullscreen"})):Pn("div",{className:"unit_iframe_wrapper"},Pn("iframe",{src:e,width:"560",height:"315",frameborder:"0",allowfullscreen:"allowfullscreen"})))):"",Pn("div",{dangerouslySetInnerHTML:{__html:i.content},ref:e=>{e&&!t&&n(e)}}),i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.attachments&&i.meta.attachments.length?Pn("div",{className:"unit_attachments"},Pn("h3",null,window.wplms_course_data.translations.attachments),i.meta.attachments.map((e,t)=>Pn("div",{className:"attachment"},Pn("span",null,e.name),Pn("a",{href:e.link,download:e.link.substring(e.link.lastIndexOf("/")+1),target:"_blank",className:"vicon vicon-download"})))):"",i.meta&&i.meta.hasOwnProperty("access")&&i.meta.access&&i.meta.attachments&&i.meta.assignments.length?Pn("div",{className:"unit_assignments"},Pn("h3",null,window.wplms_course_data.translations.assignments),i.meta.assignments.map((t,n)=>Pn("div",{className:"assignment"},Pn("div",{className:"assignment_heading"},Pn("span",null,t.title),Pn("div",{className:"assignment_meta"},t&&t.hasOwnProperty("show")&&t.show?Pn("a",{className:"vicon vicon-minus",onClick:()=>{h(!1,n)}}):Pn("a",{className:"vicon vicon-plus",onClick:()=>{h(!0,n)}}))),t.show?Pn("div",{className:"assignment_content_wrapper"},Pn(Z,{assignment:t,assignmentIndex:n,index:n,unitIndex:e.index,update:_})):""))):"",i.meta.hasOwnProperty("pratice_questions")&&i.meta.pratice_questions.length?Pn("div",{className:"pratice_questions"},Pn(In,{questions:i.meta.pratice_questions})):"")};const{createElement:jn,render:Xn,useState:Yn,useEffect:Un,Fragment:Wn}=wp.element,{dispatch:Vn,select:Jn}=wp.data;var $n=e=>{const[t,n]=Yn(!1),[i,r]=Yn(!1),[s,o]=Yn(!1);return Un(()=>{r(!1);let t={id:e.id,type:"unit",course:e.course};Jn("vibebp")&&Jn("vibebp").hasOwnProperty("getToken")&&Jn("vibebp").getToken()&&(t.token=Jn("vibebp").getToken()),fetch(`${window.wplms_course_data.api_url}/course/single-unit/${e.id}?client_id=${window.wplms_course_data.client_id}`,{method:"post",body:JSON.stringify(t)}).then(e=>e.json()).then(e=>{e&&e.hasOwnProperty("meta")&&n(e),r(!0)}),o(!0)},[e]),s?jn(Wn,null,jn("div",{className:"unit_popup_wrapper",onClick:e=>{document.querySelector(".unit_popup_wrapper")&&e.target===document.querySelector(".unit_popup_wrapper")&&o(!1)}},jn("div",{className:"unit_popup_content"},jn("span",{className:"vicon vicon-close",onClick:()=>{o(!1)}}),i?jn("div",{className:"unit_content"},t?jn(Fn,{curriculumItem:t,noLabels:!0}):""):jn(a,null)))):""};const{createElement:Kn,useState:Gn,useEffect:Qn,Fragment:Zn,render:ei}=wp.element;function ti(e,t){return"string"==typeof e.className&&(e.className&&e.className.split(" ").indexOf(t)>-1)}document.addEventListener("click",(function(e){if(ti(e.target,"curriculum_unit_popup")||ti(e.target.parentElement,"curriculum_unit_popup")){let t=e.target;if(ti(e.target.parentElement,"curriculum_unit_popup")&&(t=e.target.parentElement),e.preventDefault(),e.stopPropagation(),null==document.getElementById("course_unit_popup")){let e=document.createElement("div");e.setAttribute("id","course_unit_popup"),document.body.appendChild(e)}ei(Kn($n,{id:t.getAttribute("data-id"),course:t.getAttribute("data-course")}),document.getElementById("course_unit_popup"))}}),!1)}]);